<!doctype html>
<!--[if IE 6]>
<html id="ie6" lang="zh-CN">
<![endif]-->
<!--[if IE 7]>
<html id="ie7" lang="zh-CN">
<![endif]-->
<!--[if IE 8]>
<html id="ie8" lang="zh-CN">
<![endif]-->
<!--[if !(IE 6) | !(IE 7) | !(IE 8)  ]><!-->
<html lang="zh-CN">
 <!--<![endif]-->
 <head>      
  <link rel="stylesheet" type="text/css" media="all" href="stylesheets/style.css">     
  <link rel="stylesheet" id="codebox-css" href="stylesheets/codebox.css" type="text/css" media="screen">             
 </head> 
 <body class="single single-post postid-101 single-format-standard content-sidebar"> 
  <div id="page" class="hfeed"> 
   <header id="branding" role="banner"> 
    <hgroup> 
     <h1 id="site-title"><span><a href="http://codelifeliwan.github.io/" title="Code_Life_LiWan" rel="home">Code_Life_LiWan</a></span></h1> 
     <h2 id="site-description">My heart will go on and on…</h2> 
    </hgroup>  
    <!-- #access --> 
   </header>
   <!-- #branding --> 
   <div id="main" class="clearfix"> 
    <div id="primary"> 
     <div id="content" role="main"> 
      <!-- #nav-single --> 
      <article id="post-101" class="post-101 post type-post status-publish format-standard hentry category-acm tag-uva"> 
       <header class="entry-header"> 
        <h1 class="entry-title">UVA&nbsp;10129&nbsp;–&nbsp;Play&nbsp;on&nbsp;Words&nbsp;解题报告</h1> 
        <div class="entry-meta"> 
         <span class="sep">Posted on </span>
         <a href="http://codelifeliwan.github.io/?p=101" title="上午 11:54" rel="bookmark"><time class="entry-date" datetime="2011-07-29T11:54:38+00:00" pubdate>29 七月, 2011</time></a>
         <span class="by-author"> <span class="sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://codelifeliwan.github.io/?author=1" title="View all posts by wanli" rel="author">wanli</a></span></span> 
         <span class="sep"> — </span> 
         <span class="comments-link"> <a href="http://codelifeliwan.github.io/?p=101#respond" title="Comment on UVA&nbsp;10129&nbsp;–&nbsp;Play&nbsp;on&nbsp;Words&nbsp;解题报告">No Comments ↓</a> </span> 
        </div>
        <!-- .entry-meta --> 
       </header>
       <!-- .entry-header --> 
       <div class="entry-content">
        <div class="entry-content"> 
         <p> 这个题比较郁闷，TLE一直，到网上看看人家都是WA就我的TLE，边不一样，擦！</p> 
         <div>
           题目就是找欧拉通路，先得判断图是否连通，判断的时候当成无向图即可。然后就是欧拉通路的条件了。 
         </div> 
         <div>
           题目： 
         </div> 
         <div> 
          <h2 style="text-align:center" align="center"><span style="mso-ansi-language: en-Us" lang="EN-US" xml:lang="EN-US">Play on<br> Words</span></h2> 
          <p><span style="mso-ansi-language:en-Us" lang="EN-US" xml:lang="EN-US">Some of the secret doors contain a&nbsp;<wbr>very<br> interesting word puzzle. The team of archaeologists has to solve it<br> to open that doors. Because there is no other way to open the<br> doors, the puzzle is very important for us.</span></p> 
          <p><span style="mso-ansi-language:en-Us" lang="EN-US" xml:lang="EN-US">There is a&nbsp;<wbr>large number of magnetic plates<br> on every door. Every plate has one word written on it. The plates<br> must be arranged into a sequence in such a way that every word<br> begins with the same letter as the previous word ends. For example,<br> the word “ac<u>m</u>” can be followed by the word<br> “<u>m</u>otorola”. Your task is to write a computer program that<br> will read the list of words and determine whether it is possible to<br> arrange all of the plates in a&nbsp;<wbr>sequence (according<br> to the given rule) and consequently to open the door.</span></p> 
          <h3><span style="mso-ansi-language:en-Us" lang="EN-US" xml:lang="EN-US">Input Specification</span></h3> 
          <p><span style="mso-ansi-language:en-Us" lang="EN-US" xml:lang="EN-US">The input consists of <var>T</var> test<br> cases. The number of them (<var>T</var>) is given on the first line<br> of the input file. Each test case begins with a line containing<br> a&nbsp;<wbr>single integer number <var>N</var>that indicates<br> the number of plates (<var>1 &lt;= N &lt;=<br> 100000</var>). Then exactly <var>N</var>lines follow, each<br> containing a&nbsp;<wbr>single word. Each word contains at<br> least two and at most 1000 lowercase characters, that means only<br> letters ‘</span><code><span style="font-size:10.0pt;font-family:&quot;Courier new&quot;;mso-ansi-language: en-Us" lang="EN-US" xml:lang="EN-US">a</span></code><span style="mso-ansi-language:en-Us" lang="EN-US" xml:lang="EN-US">‘ through<br> ‘</span><code><span style="font-size:10.0pt;font-family: &quot;Courier new&quot;;mso-ansi-language:en-Us" lang="EN-US" xml:lang="EN-US">z</span></code><span style="mso-ansi-language:en-Us" lang="EN-US" xml:lang="EN-US">‘ will<br> appear in the word. The same word may appear several times in the<br> list.</span></p> 
          <h3><span style="mso-ansi-language:en-Us" lang="EN-US" xml:lang="EN-US">Output Specification</span></h3> 
          <p><span style="mso-ansi-language:en-Us" lang="EN-US" xml:lang="EN-US">Your program has to determine whether it<br> is possible to arrange all the plates in<br> a&nbsp;<wbr>sequence such that the first letter of each word<br> is equal to the last letter of the previous word. All the plates<br> from the list must be used, each exactly once. The words mentioned<br> several times must be used that number of times.</span></p> 
          <p><span style="mso-ansi-language:en-Us" lang="EN-US" xml:lang="EN-US">If there exists such an ordering of plates, your program<br> should print the&nbsp;<wbr>sentence<br> “</span><code><span style="font-size:10.0pt;font-family:&quot;Courier new&quot;;mso-ansi-language: en-Us" lang="EN-US" xml:lang="EN-US">Ordering is<br> possible.</span></code><span style="mso-ansi-language: en-Us" lang="EN-US" xml:lang="EN-US">“. Otherwise, output<br> the&nbsp;<wbr>sentence “</span><code><span style="font-size:10.0pt;font-family:&quot;Courier new&quot;;mso-ansi-language: en-Us" lang="EN-US" xml:lang="EN-US">The door cannot be<br> opened.</span></code><span style="mso-ansi-language:en-Us" lang="EN-US" xml:lang="EN-US">“.</span></p> 
          <h3><span style="mso-ansi-language:en-Us" lang="EN-US" xml:lang="EN-US">Sample Input</span></h3> 
          <pre>
3&nbsp;<wbr>
</pre> 
          <pre>
2&nbsp;<wbr>
</pre> 
          <pre>
acm&nbsp;<wbr>
</pre> 
          <pre>
ibm&nbsp;<wbr>
</pre> 
          <pre>
3&nbsp;<wbr>
</pre> 
          <pre>
acm&nbsp;<wbr>
</pre> 
          <pre>
malform&nbsp;<wbr>
</pre> 
          <pre>
mouse&nbsp;<wbr>
</pre> 
          <pre>
2&nbsp;<wbr>
</pre> 
          <pre>
ok&nbsp;<wbr>
</pre> 
          <pre>
ok
</pre> 
          <h3><span style="mso-ansi-language:en-Us" lang="EN-US" xml:lang="EN-US">Output for the Sample Input</span></h3> 
          <pre>
The door cannot be opened.&nbsp;<wbr>
</pre> 
          <pre>
Ordering is possible.&nbsp;<wbr>
</pre> 
          <pre>
The door cannot be opened.
</pre> 
          <pre>
<br>
</pre> 
          <pre>
<br>
</pre> 
          <pre>
代码：
</pre> 
          <pre>
#include&lt;iostream&gt;
</pre> 
          <pre>
#include&lt;cstring&gt;
</pre> 
          <pre>
#include&lt;queue&gt;
</pre> 
          <pre>
#include&lt;fstream&gt;
</pre> 
          <pre>
#define maxn 30
</pre> 
          <pre>
using namespace std;
</pre> 
          <pre>
char S[1005];
</pre> 
          <pre>
int in[maxn];
</pre> 
          <pre>
int out[maxn];
</pre> 
          <pre>
int vis[maxn];
</pre> 
          <pre>
int map[maxn][maxn];
</pre> 
          <pre>
int num;
</pre> 
          <pre>
<br>
</pre> 
          <pre>
int main()
</pre> 
          <pre>
{
</pre> 
          <pre>
//<span style="white-space:pre"> </span>freopen("test.txt","r",stdin);
</pre> 
          <pre>
<span style="white-space:pre"> </span>int ncase;
</pre> 
          <pre>
<span style="white-space:pre"> </span>cin&gt;&gt;ncase;
</pre> 
          <pre>
<span style="white-space:pre"> </span>while(ncase--){
</pre> 
          <pre>
<span style="white-space:pre"> </span>cin&gt;&gt;num;
</pre> 
          <pre>
<span style="white-space:pre"> </span>memset(map,0,sizeof(map));
</pre> 
          <pre>
<span style="white-space:pre"> </span>memset(vis,0,sizeof(vis));
</pre> 
          <pre>
<span style="white-space:pre"> </span>memset(in,0,sizeof(in));
</pre> 
          <pre>
<span style="white-space:pre"> </span>memset(out,0,sizeof(out));
</pre> 
          <pre>
<span style="white-space:pre"> </span>int zimu_count=0;
</pre> 
          <pre>
<span style="white-space:pre"> </span>for(int i=0;i&lt;num;i++){
</pre> 
          <pre>
<span style="white-space:pre"> </span>cin&gt;&gt;S;
</pre> 
          <pre>
<span style="white-space:pre"> </span>int len=strlen(S);
</pre> 
          <pre>
<span style="white-space:pre"> </span>in[S[len-1]-'a']++;
</pre> 
          <pre>
<span style="white-space:pre"> </span>out[S[0]-'a']++;
</pre> 
          <pre>
<span style="white-space:pre"> </span>map[S[0]-'a'][S[len-1]-'a']++;
</pre> 
          <pre>
<span style="white-space:pre"> </span>if(vis[S[0]-'a']==0){
</pre> 
          <pre>
<span style="white-space:pre"> </span>zimu_count++;
</pre> 
          <pre>
<span style="white-space:pre"> </span>vis[S[0]-'a']=1;
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
<span style="white-space:pre"> </span>if(vis[S[len-1]-'a']==0){
</pre> 
          <pre>
<span style="white-space:pre"> </span>zimu_count++;
</pre> 
          <pre>
<span style="white-space:pre"> </span>vis[S[len-1]-'a']=1;
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
<span style="white-space:pre"> </span>memset(vis,0,sizeof(vis));
</pre> 
          <pre>
<span style="white-space:pre"> </span>int count=1;
</pre> 
          <pre>
<span style="white-space:pre"> </span>queue&lt;int&gt;qu;
</pre> 
          <pre>
<span style="white-space:pre"> </span>qu.push(0);
</pre> 
          <pre>
<span style="white-space:pre"> </span>vis[0]=1;
</pre> 
          <pre>
<span style="white-space:pre"> </span>while(!qu.empty()){
</pre> 
          <pre>
<span style="white-space:pre"> </span>int tmp=qu.front();
</pre> 
          <pre>
<span style="white-space:pre"> </span>qu.pop();
</pre> 
          <pre>
<span style="white-space:pre"> </span>for(int i=1;i&lt;26;i++){
</pre> 
          <pre>
<span style="white-space:pre"> </span>if(!vis[i]&amp;&amp;(map[tmp][i]||map[i][tmp])){
</pre> 
          <pre>
<span style="white-space:pre"> </span>vis[i]=1;
</pre> 
          <pre>
<span style="white-space:pre"> </span>qu.push(i);
</pre> 
          <pre>
<span style="white-space:pre"> </span>count++;
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
<span style="white-space:pre"> </span>if(count!=zimu_count){
</pre> 
          <pre>
<span style="white-space:pre"> </span>cout&lt;&lt;"The door cannot be opened."&lt;&lt;endl;
</pre> 
          <pre>
<span style="white-space:pre"> </span>continue;
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
<span style="white-space:pre"> </span>int mark=0;
</pre> 
          <pre>
<span style="white-space:pre"> </span>for(int i=0;i&lt;26;i++){
</pre> 
          <pre>
<span style="white-space:pre"> </span>if((in[i]-out[i]==1)||(in[i]-out[i]==-1)){
</pre> 
          <pre>
<span style="white-space:pre"> </span>mark++;
</pre> 
          <pre>
<span style="white-space:pre"> </span>}else if(in[i]!=out[i]){
</pre> 
          <pre>
<span style="white-space:pre"> </span>mark=-1;
</pre> 
          <pre>
<span style="white-space:pre"> </span>break;
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
<span style="white-space:pre"> </span>if(0==mark||2==mark)cout&lt;&lt;"Ordering is possible."&lt;&lt;endl;
</pre> 
          <pre>
<span style="white-space:pre"> </span>else cout&lt;&lt;"The door cannot be opened."&lt;&lt;endl;
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
<span style="white-space:pre"> </span>return 0;
</pre> 
          <pre>
}
</pre> 
          <div></div> 
          <p><span style="mso-ansi-language:en-Us" lang="EN-US" xml:lang="EN-US">&nbsp;<wbr></span></p> 
         </div> 
        </div>
       </div>
       <!-- .entry-content --> 
       <!-- .entry-meta --> 
      </article>
      <!-- #post-101 --> 
      <!-- #comments --> 
     </div>
     <!-- #content --> 
    </div>
    <!-- #primary --> 
    <!-- #secondary .widget-area --> 
   </div>
   <!-- #main --> 
   <!-- #colophon --> 
  </div>
  <!-- #page -->   
  <!-- JiaThis Button BEGIN -->  
  <!-- JiaThis Button END -->   
 </body>
</html>