<!doctype html>
<!--[if IE 6]>
<html id="ie6" lang="zh-CN">
<![endif]-->
<!--[if IE 7]>
<html id="ie7" lang="zh-CN">
<![endif]-->
<!--[if IE 8]>
<html id="ie8" lang="zh-CN">
<![endif]-->
<!--[if !(IE 6) | !(IE 7) | !(IE 8)  ]><!-->
<html lang="zh-CN">
 <!--<![endif]-->
 <head>      
  <link rel="stylesheet" type="text/css" media="all" href="stylesheets/style.css">     
  <link rel="stylesheet" id="codebox-css" href="stylesheets/codebox.css" type="text/css" media="screen">             
 </head> 
 <body class="single single-post postid-220 single-format-standard content-sidebar"> 
  <div id="page" class="hfeed"> 
   <header id="branding" role="banner"> 
    <hgroup> 
     <h1 id="site-title"><span><a href="http://codelifeliwan.github.io/" title="Code_Life_LiWan" rel="home">Code_Life_LiWan</a></span></h1> 
     <h2 id="site-description">My heart will go on and on…</h2> 
    </hgroup>  
    <!-- #access --> 
   </header>
   <!-- #branding --> 
   <div id="main" class="clearfix"> 
    <div id="primary"> 
     <div id="content" role="main"> 
      <!-- #nav-single --> 
      <article id="post-220" class="post-220 post type-post status-publish format-standard hentry category-my_operating_system tag-computer"> 
       <header class="entry-header"> 
        <h1 class="entry-title">操作系统引导–从实模式到保护模式</h1> 
        <div class="entry-meta"> 
         <span class="sep">Posted on </span>
         <a href="http://codelifeliwan.github.io/?p=220" title="下午 11:20" rel="bookmark"><time class="entry-date" datetime="2012-03-10T23:20:37+00:00" pubdate>10 三月, 2012</time></a>
         <span class="by-author"> <span class="sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://codelifeliwan.github.io/?author=1" title="View all posts by wanli" rel="author">wanli</a></span></span> 
         <span class="sep"> — </span> 
         <span class="comments-link"> <a href="http://codelifeliwan.github.io/?p=220#comments" title="Comment on 操作系统引导–从实模式到保护模式">1 Comment ↓</a> </span> 
        </div>
        <!-- .entry-meta --> 
       </header>
       <!-- .entry-header --> 
       <div class="entry-content">
        <div class="entry-content"> 
         <div style="LAYoUT-GriD: 15.6pt none"> 
          <h1 style="TexT-ALiGn: center; MArGin-Top: 0pt; MArGin-BoTToM: 0pt"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 22pt; FonT-WeiGHT: bold; mso-spacerun: 'yes'"><br> 从开始到保护</span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 22pt; FonT-WeiGHT: bold; mso-spacerun: 'yes'">–<font face="宋体">系统开机引导</font></span></h1> 
          <p style="MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; MArGin-LeFT: 105pt"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">——<font face="宋体">没有一个文档能写的通俗易懂，我希望写出来。</font></span></p> 
          <h2 style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '黑体'; FonT-siZe: 16pt; FonT-WeiGHT: bold; mso-spacerun: 'yes'"><br> 开机引导和实模式：</span></h2> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">两个星期加上假期吐血整理，所述为计算机的开机引导，其中包括一系列计算机内存设置等等，由于没有老师教，本人理解可能还是有点错误，希望错误的地方看的博友们能帮忙指出来，共同学习，谢谢<font face="Times New Roman">!</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">目前正在看<font face="Times New Roman">linux0.11</font><font face="宋体">内核源代码，参考资料极其环境配置后面会说出来。</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">我们的操作系统从计算机加电开始就开始运行，那么，爱思考的同学们会问计算机的运行最起码都是从内存运行的，运行的是内存的代码，那么在开机启动的时候计算机内存里面是不会有东西的，那么，到底操作系统是怎么启动的呢？</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">其实从计算机加电开始，操作系统首先进行一系列自检，这个自检是通过计算机加电然后发送一个信号给<font face="Times New Roman">BIOS</font><font face="宋体">，</font><font face="Times New Roman">BIOS</font><font face="宋体">进行一部分代码复制来初始化计算机（这里的代码复制的是一个固定</font><font face="Times New Roman">ROM</font><font face="宋体">区里面的？），初始化完毕后计算机就开始自动读取磁盘，磁盘读取一个扇区，</font><font face="Times New Roman">512</font><font face="宋体">字节，当独到某个磁盘第</font><font face="Times New Roman">0</font><font face="宋体">磁道第一个扇区的最后两个字节为</font><font face="Times New Roman">55</font><font face="宋体">和</font><font face="Times New Roman">aa</font><font face="宋体">的时候计算机就自动认为其为引导程序，就会把此</font><font face="Times New Roman">512</font><font face="宋体">字节读入内存绝对地址</font><font face="Times New Roman">0x07c00</font><font face="宋体">处。此时，计算机的操作就完全交给程序设计者了。</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">那么，也就是说引导系统必须具备如下因素：</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">1、</span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">加载到<font face="Times New Roman">0x7c00</font><font face="宋体">处</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">2、</span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">大小为<font face="Times New Roman">512</font><font face="宋体">字节</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">3、</span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">最后两个字节为<font face="Times New Roman">55</font><font face="宋体">和</font><font face="Times New Roman">aa</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">满足这三个条件的程序都可以作为引导，只要将其写入磁盘的第<font face="Times New Roman">0</font><font face="宋体">磁道第一扇区处即可成为引导。</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">说到这里，有一件比较有意思的事情，去年一学弟说自己写了个病毒，破坏磁盘，当时就想想这个是个硬件问题，前几天突然想了想，不能启动系统不就是引导坏了吗？这个是可以修的，只要将程序写入磁盘，不就<font face="Times New Roman">OK</font><font face="宋体">了吗，遂要那个代码，可惜代码没了，貌似在现在的</font><font face="Times New Roman">windows</font><font face="宋体">系统里面直接写汇编读写磁盘就是不行，保护太强了，不知道他是怎么实现的破坏磁盘。</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">这里说一点常识：这里说的写入磁盘的代码是二进制的代码，就是纯二进制，也就是机器码，那么在<font face="Times New Roman">windows</font><font face="宋体">里面（由于目前我是在</font><font face="Times New Roman">windows</font><font face="宋体">里面开发的，</font><font face="Times New Roman">windows</font><font face="宋体">的批处理很好用，而</font><font face="Times New Roman">Linux</font><font face="宋体">的</font><font face="Times New Roman">GNU&nbsp;<wbr>make</font><font face="宋体">现在还不会用）是一种</font><font face="Times New Roman">.com</font><font face="宋体">文件，用</font><font face="Times New Roman">masm</font><font face="宋体">汇编的话可以这样将</font><font face="Times New Roman">exe</font><font face="宋体">文件转换成</font><font face="Times New Roman">com</font><font face="宋体">文件：</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">Exe2bin&nbsp;<wbr>a.exe&nbsp;<wbr>a.com</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">而如果使用<font face="Times New Roman">nasm</font><font face="宋体">汇编的话直接编译成</font><font face="Times New Roman">.bin</font><font face="宋体">文件就行了：</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">nasm&nbsp;<wbr>-o&nbsp;<wbr>boot.bin&nbsp;<wbr>boot.asm</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">编译好后的<font face="Times New Roman">com</font><font face="宋体">文件可以直接双击执行，而</font><font face="Times New Roman">bin</font><font face="宋体">文件可以使用二进制查看，也可以自己写程序打开查看，都可以使用</font><font face="Times New Roman">debug</font><font face="宋体">调试，这两种文件区别是</font><font face="Times New Roman">com</font><font face="宋体">在内存定位为</font><font face="Times New Roman">0x0100</font><font face="宋体">处，而</font><font face="Times New Roman">bin</font><font face="宋体">文件不确定，由于</font><font face="Times New Roman">windows</font><font face="宋体">的保护，也可能是一致的。</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">在这里不得不提到：在最初计算机自检完成后将磁盘内容读入内存的时候，<font face="Times New Roman">dl</font><font face="宋体">寄存器中存的是本磁盘的磁盘号，所以可以直接保存（？？？）。</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">看了这个你可可以写个引导程序试试哦<font face="Times New Roman">~~~</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">学过汇编和机组的同学知道，我们老师讲的计算机<font face="Times New Roman">8086</font><font face="宋体">是</font><font face="Times New Roman">20</font><font face="宋体">根地址线，那么我们的通用寄存器和段寄存器什么的都是</font><font face="Times New Roman">16</font><font face="宋体">位的，关于如何寻址汇编书上讲了，我想说的是：</font><font face="Times New Roman">20</font><font face="宋体">根地址线，寻址能力是</font><font face="Times New Roman">2^20=1MB</font><font face="宋体">，也就是说，</font><font face="Times New Roman">cpu</font><font face="宋体">最多只能访问</font><font face="Times New Roman">1MB</font><font face="宋体">内存，那么现在我们的计算机有的都</font><font face="Times New Roman">4GB</font><font face="宋体">内存该怎么办呢？</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">计算机加电的时候其实就是按照<font face="Times New Roman">8086</font><font face="宋体">的寻址方式来寻址，只能访问</font><font face="Times New Roman">1MB</font><font face="宋体">内存，这个能访问</font><font face="Times New Roman">1MB</font><font face="宋体">内存的状态我们称为实模式，而把能寻址更多的内存的模式称为保护模式，先看看计算机加电后能访问的这</font><font face="Times New Roman">1MB</font><font face="宋体">内存中内容分布（来自《操作系统引导探究》&nbsp;<wbr>谢煜波）：</font></span></p> 
          <p style="TexT-ALiGn: center; MArGin-Top: 0pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <a href="http://photo.blog.sina.com.cn/showpic.html#blogid=6730a3aa01010liv&amp;url=http://s5.sinaimg.cn/orignal/6730a3aagbae511f0d8d4" target="_blank"><img name="image_operate_71421331392819100" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" real_src="http://s5.sinaimg.cn/middle/6730a3aagbae511f0d8d4&amp;690" width="640" height="637" alt="操作系统引导--从实模式到保护模式" title="操作系统引导--从实模式到保护模式"></a></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">很显然我们在实模式下有一部分内存是不可动的，我们能改变的只是自由内存区和引导程序加载区，比如你如果动了中断向量表区，那么调用<font face="Times New Roman">BIOS</font><font face="宋体">中断将会出错。</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">关于中断向量表和显示内存曲读者可以参照齐志儒&nbsp;<wbr>高福祥《汇编语言程序设计》。</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">大家都知道，实模式下的内存寻址是直接在段寄存器里面设置段地址的高<font face="Times New Roman">16</font><font face="宋体">位，即绝对内存的高</font><font face="Times New Roman">16</font><font face="宋体">位，而后后面使用偏移地址定位内存，而在</font><font face="Times New Roman">32</font><font face="宋体">位保护模式下则不行。</font></span></p> 
          <h2 style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '黑体'; FonT-siZe: 16pt; FonT-WeiGHT: bold; mso-spacerun: 'yes'"><br> 32<font face="黑体">位保护模式下的寻址：</font></span></h2> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">在<font face="Times New Roman">32</font><font face="宋体">位保护模式下</font><font face="Times New Roman">cpu</font><font face="宋体">是通过内存分段来寻址的。首先我们来大体看一下分段的寻址：在分段机制中，将大内存分为很多个小的单位：段，段的首地址和长度是特定保存在一个索引中的，索引的首地址是特定保存的，当</font><font face="Times New Roman">cpu</font><font face="宋体">想访问某一块内存的时候可以指明是哪个段比如说是第</font><font face="Times New Roman">N</font><font face="宋体">个段，然后根据段的索引的首地址和</font><font face="Times New Roman">N</font><font face="宋体">来确定是在索引中的哪个项，根据索引中的第</font><font face="Times New Roman">N</font><font face="宋体">（这个权且当作第</font><font face="Times New Roman">N</font><font face="宋体">项，其实是第</font><font face="Times New Roman">N+1</font><font face="宋体">项，后面说明）保存的信息来找到特定的内存地址：</font></span></p> 
          <p style="TexT-ALiGn: center; MArGin-Top: 0pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <a href="http://photo.blog.sina.com.cn/showpic.html#blogid=6730a3aa01010liv&amp;url=http://s9.sinaimg.cn/orignal/6730a3aagbae512f44448" target="_blank"><img name="image_operate_47191331392836260" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" real_src="http://s9.sinaimg.cn/middle/6730a3aagbae512f44448&amp;690" width="504" height="544" alt="操作系统引导--从实模式到保护模式" title="操作系统引导--从实模式到保护模式"></a></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">相信读者已经明白了分段了，就是用一块固定内存存储内存的段目录，将目录首地址保存，通过选择目录的第几项来选择段。那么这个在硬件是怎么实现的呢？</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">大体概括如下：</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">在<font face="Times New Roman">Intel</font><font face="宋体">的计算机中是使用一个寄存器来保存段的目录的首地址：</font><font face="Times New Roman">GDTR</font><font face="宋体">寄存器，称为全局描述符表寄存器，而那么段的目录（实际是一张表）称为全局描述符表，英文名叫</font><font face="Times New Roman">GDT</font><font face="宋体">，用来描述全局的内存。</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">事实上，与全局描述符表寄存器对应的还有个局部描述符表寄存器。这里暂时不介绍。</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">另外，还有个寄存器用来选择使用目录里面的哪个段，这个寄存器我们称为“段选择子”。</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">那么先来看看第一个寄存器：<font face="Times New Roman">GDTR</font><font face="宋体">，即全局描述符表寄存器：</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-siZe: 10.5pt"><font face="宋体">GDTR</font><font style="FonT-FAMiLY: 宋体" face="宋体">是一个</font><font style="FonT-FAMiLY: 宋体" face="Times New Roman">48</font><font style="FonT-FAMiLY: 宋体" face="宋体">位（</font><font style="FonT-FAMiLY: 宋体" face="Times New Roman">6</font><font style="FonT-FAMiLY: 宋体" face="宋体">字节）寄存器，低</font><font style="FonT-FAMiLY: 宋体" face="Times New Roman">16</font><font style="FonT-FAMiLY: 宋体" face="宋体">位用于存储段的索引长度，即全局描述符表长度，称为表限，以</font><font face="'Times New Roman'">1</font><font style="FonT-FAMiLY: 宋体" face="宋体">字节为一单位（后面说到其实就是全局描述符的个数）。高</font><font style="FonT-FAMiLY: 宋体" face="Times New Roman">32</font><font style="FonT-FAMiLY: 宋体" face="宋体">位用来存储描述符表的基址。具体如下（来自《操作系统引导探究》&nbsp;<wbr>谢煜波）：</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <a href="http://photo.blog.sina.com.cn/showpic.html#blogid=6730a3aa01010liv&amp;url=http://s10.sinaimg.cn/orignal/6730a3aagbae514255bc9" target="_blank"><img name="image_operate_89531331392871093" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" real_src="http://s10.sinaimg.cn/middle/6730a3aagbae514255bc9&amp;690" width="690" height="129" alt="操作系统引导--从实模式到保护模式" title="操作系统引导--从实模式到保护模式"></a></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">这里比如我们想设置全局描述符表的基址为<font face="Times New Roman">0x10000000</font><font face="宋体">（记住这里是</font><font face="Times New Roman">32</font><font face="宋体">位），描述符表共有</font><font face="Times New Roman">0x7fff</font><font face="宋体">个字节长，</font><font face="宋体">那么，就设置</font><font face="Times New Roman">GDTR</font><font face="宋体">为</font><font face="Times New Roman">0x100000007fff</font><font face="宋体">即可。</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">这里，首先告诉你目录（即全局描述符表寄存器）里面的每个项，即每个全局描述符长为<font face="Times New Roman">8</font><font face="宋体">字节。</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">再介绍段选择子：</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">段选择子也是一个寄存器，共<font face="Times New Roman">16</font><font face="宋体">位，用来存储使用第几个段和这个段的部分属性。如下（来自《操作系统引导探究》&nbsp;<wbr>谢煜波）：</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <a href="http://photo.blog.sina.com.cn/showpic.html#blogid=6730a3aa01010liv&amp;url=http://s4.sinaimg.cn/orignal/6730a3aatbae514d2f1c3" target="_blank"><img name="image_operate_93701331392871749" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" real_src="http://s4.sinaimg.cn/middle/6730a3aatbae514d2f1c3&amp;690" alt="操作系统引导--从实模式到保护模式" title="操作系统引导--从实模式到保护模式"></a></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">这里的索引值就是指的第几个段，占这个<font face="Times New Roman">16</font><font face="宋体">位寄存器的高</font><font face="Times New Roman">13</font><font face="宋体">位，比如，我想使用第一个段，那么可以设置高</font><font face="Times New Roman">13</font><font face="宋体">位为</font><font face="Times New Roman">1</font><font face="宋体">，也是可以说，段的选择位只有</font><font face="Times New Roman">13</font><font face="宋体">位，共可寻址</font><font face="Times New Roman">2^13=8192</font><font face="宋体">个段，多了就寻址不到了，前面说过，每个描述符</font><font face="Times New Roman">8</font><font face="宋体">个字节，那么可以知道，这个目录（全局描述符表）最大可以有</font><font face="Times New Roman">8192*8=64KB</font><font face="宋体">。</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">TI<font face="宋体">是个标志，</font><font face="Times New Roman">TI=0</font><font face="宋体">时表示此选择子是个全局描述符的选择子，为</font><font face="Times New Roman">1</font><font face="宋体">时表示这是个局部描述符的选择子，此处可以知道，全局描述符的选择子和局部描述符的选择子其实是同一个寄存器。</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">RPL<font face="宋体">为特权级，共有四个特权级，最高特权级为</font><font face="Times New Roman">00</font><font face="宋体">，表示最底层的操作。</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">最后来说说那个目录，即全局描述符表：</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">全局描述符表是由一个一个的全局描述符组成的，每个描述符<font face="Times New Roman">8</font><font face="宋体">字节，共</font><font face="Times New Roman">64</font><font face="宋体">位，这</font><font face="Times New Roman">64</font><font face="宋体">位的作用和分布如下（来自《操作系统引导探究》&nbsp;<wbr>谢煜波）：</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <a href="http://photo.blog.sina.com.cn/showpic.html#blogid=6730a3aa01010liv&amp;url=http://s14.sinaimg.cn/orignal/6730a3aatbae516022d1d" target="_blank"><img name="image_operate_52921331392891829" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" real_src="http://s14.sinaimg.cn/middle/6730a3aatbae516022d1d&amp;690" width="690" height="640" alt="操作系统引导--从实模式到保护模式" title="操作系统引导--从实模式到保护模式"></a></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">这里首先来看看段限部分，段限顾名思义就是段的长度限制，也就是本描述符所描述的段最大可以有多长，从图上可以看出来，段限分为两部分，共<font face="Times New Roman">20</font><font face="宋体">位，而段的长度的单位是由</font><font face="Times New Roman">G</font><font face="宋体">标志来控制的，</font><font face="Times New Roman">G=0</font><font face="宋体">表示长度的单位为</font><font face="Times New Roman">1</font><font face="宋体">字节，</font><font face="Times New Roman">G=1</font><font face="宋体">表示长度的单位为</font><font face="Times New Roman">4KB</font><font face="宋体">。比如</font><font face="Times New Roman">G=0</font><font face="宋体">而段限为</font><font face="Times New Roman">100</font><font face="宋体">，那么，此段的大小为</font><font face="Times New Roman">1B*100=100B</font><font face="宋体">，而如果</font><font face="Times New Roman">G=1</font><font face="宋体">而段限为</font><font face="Times New Roman">100</font><font face="宋体">，那么此段大小为</font><font face="Times New Roman">4KB*100+4KB=404KB（注意，这里的段限是指向头的，需要加4KB）</font><font face="宋体">。</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">这里还可以看出来，段基址也被分为两部分，共<font face="Times New Roman">32</font><font face="宋体">位基址，段的基址就是这个段在内存中的开始地址，这里需要指出的是，段的基址为此段可访问的开始地址，加上段限就是此段可访问的地址，那么如果段限为</font><font face="Times New Roman">0</font><font face="宋体">的话此段还是可以访问开始地址的，这里不深究。</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">其他的位作用如下（来自《操作系统引导探究》&nbsp;<wbr>谢煜波）：</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">TYPE<font face="宋体">：&nbsp;<wbr>&nbsp;<wbr>表明此段的类型，</font><font face="Times New Roman">4&nbsp;<wbr></font><font face="宋体">位中的最高位被清&nbsp;<wbr></font><font face="Times New Roman">0&nbsp;<wbr></font><font face="宋体">的时候表是它是数据段，相应的余下的三位，从左到右依次为&nbsp;<wbr></font><font face="Times New Roman">E</font><font face="宋体">、</font><font face="Times New Roman">W</font><font face="宋体">、</font><font face="Times New Roman">A</font><font face="宋体">，即数据段的&nbsp;<wbr></font><font face="Times New Roman">TYPE&nbsp;<wbr></font><font face="宋体">为：</font><font face="Times New Roman">0EWA</font><font face="宋体">。其中&nbsp;<wbr></font><font face="Times New Roman">E&nbsp;<wbr></font><font face="宋体">表示向下增长位，置&nbsp;<wbr></font><font face="Times New Roman">1&nbsp;<wbr></font><font face="宋体">时表示向下增长（这主要是在大小需要动态改变的堆栈段中使用，如果是向下增长的段，动态的改变段的大小限制，会让堆栈空间加到堆栈的底部。如果堆栈的大小不需要改变，那么这个段既可以是向下增长的段，也可以是非向下增长的段）&nbsp;<wbr>；</font><font face="Times New Roman">W&nbsp;<wbr></font><font face="宋体">表示可写位，置&nbsp;<wbr></font><font face="Times New Roman">1</font><font face="宋体">表示可写；</font><font face="Times New Roman">A</font><font face="宋体">表示被访问位（如果&nbsp;<wbr></font><font face="Times New Roman">CPU</font><font face="宋体">访问了它，此位将会被置&nbsp;<wbr></font><font face="Times New Roman">1</font><font face="宋体">）&nbsp;<wbr>。</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>4&nbsp;<wbr><font face="宋体">位中的最高位被置&nbsp;</font><wbr><font face="Times New Roman">1&nbsp;</font><wbr><font face="宋体">时表示它是代码段，相应的余下的三位，从左到右依次为&nbsp;</font><wbr><font face="Times New Roman">C</font><font face="宋体">、Ｒ、Ａ，即代码段的&nbsp;</font><wbr><font face="Times New Roman">TYPE&nbsp;</font><wbr><font face="宋体">为：</font><font face="Times New Roman">1CRA</font><font face="宋体">。其中&nbsp;</font><wbr><font face="Times New Roman">C&nbsp;</font><wbr><font face="宋体">是表明此代码段是否是一致代码段，如果&nbsp;</font><wbr><font face="Times New Roman">C&nbsp;</font><wbr><font face="宋体">被置</font><font face="Times New Roman">1</font><font face="宋体">，表明此是一致代码段。一致代码段主要是用于特权级访问控制，这在以后的实验报告中会详细论述；</font><font face="Times New Roman">R&nbsp;</font><wbr><font face="宋体">表明此段是否可读，置&nbsp;</font><wbr><font face="Times New Roman">1&nbsp;</font><wbr><font face="宋体">表示可读；</font><font face="Times New Roman">A</font><font face="宋体">表示被访问位，这与前述一样。&nbsp;</font><wbr></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">S<font face="宋体">：为&nbsp;<wbr></font><font face="Times New Roman">1&nbsp;<wbr></font><font face="宋体">时表示这是一个代码段或数据段描述符，为&nbsp;<wbr></font><font face="Times New Roman">0&nbsp;<wbr></font><font face="宋体">时表示这是一个系统段描述符。</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">系统段描述符又称为特殊段描述符，&nbsp;<wbr>包括：&nbsp;<wbr>局部描述符表&nbsp;<wbr>（<font face="Times New Roman">LDT</font><font face="宋体">）&nbsp;</font><wbr>描述符，&nbsp;<wbr>任务状态段&nbsp;<wbr>（<font face="Times New Roman">TSS</font><font face="宋体">）描述符，调用门描述符，中断门描述符，陷阱门及任务门描述符等。&nbsp;</font><wbr></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">DPL<font face="宋体">：表示特权级，从&nbsp;<wbr></font><font face="Times New Roman">00~11</font><font face="宋体">，共&nbsp;<wbr></font><font face="Times New Roman">0</font><font face="宋体">，</font><font face="Times New Roman">1</font><font face="宋体">，</font><font face="Times New Roman">2</font><font face="宋体">，</font><font face="Times New Roman">3&nbsp;<wbr></font><font face="宋体">四个特权级&nbsp;<wbr></font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">P<font face="宋体">：为&nbsp;<wbr></font><font face="Times New Roman">0&nbsp;<wbr></font><font face="宋体">是表示此描述符无效，不能被使用&nbsp;<wbr></font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">AVL<font face="宋体">：留给程序员随便用的&nbsp;<wbr></font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">D/B<font face="宋体">：为&nbsp;<wbr></font><font face="Times New Roman">0&nbsp;<wbr></font><font face="宋体">的时候表示它是一个&nbsp;<wbr></font><font face="Times New Roman">16&nbsp;<wbr></font><font face="宋体">位的段，为&nbsp;<wbr></font><font face="Times New Roman">1</font><font face="宋体">时表示它是一个&nbsp;<wbr></font><font face="Times New Roman">32&nbsp;<wbr></font><font face="宋体">位的段</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">设置这些寄存器什么的在汇编里面都有特定的伪指令对应。</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span><a href="mailto:%E4%BB%8B%E7%BB%8D%E5%AE%8C%E5%88%86%E6%AE%B5%E6%A8%A1%E5%BC%8F%EF%BC%8C%E4%B8%8D%E7%9F%A5%E9%81%93%E4%BD%A0%E6%98%AF%E5%90%A6%E5%B7%B2%E7%BB%8F%E4%BA%86%E8%A7%A3%E4%BA%86%E5%91%A2%EF%BC%8C%E5%A6%82%E6%9E%9C%E8%BF%98%E6%9C%89%E7%96%91%E9%97%AE%E7%9A%84%E8%AF%9D%E8%AF%B7%E7%9B%B4%E6%8E%A5%E7%95%99%E8%A8%80%E6%88%96%E8%80%85%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6%E5%88%B0qdtecwanli@sina.com%EF%BC%8C%E6%88%91%E4%BB%AC%E5%A4%A7%E5%AE%B6%E4%B8%80%E8%B5%B7%E5%AD%A6%E4%B9%A0%E5%93%A6~"><br> <span style="FonT-FAMiLY: '宋体'; CoLor: rgb(0,0,255); FonT-siZe: 10pt; TexT-DeCorATion: underline; mso-spacerun: 'yes'"><br> 介绍完分段模式，不知道你是否已经了解了呢，如果还有疑问的话请直接留言或者发送邮件到<font face="Times New Roman">qdtecwanli@sina.com</font><font face="宋体">，我们大家一起学习哦</font><font face="Times New Roman">~</font></span></a></span></p> 
          <h2 style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '黑体'; FonT-siZe: 16pt; FonT-WeiGHT: bold; mso-spacerun: 'yes'"><br> 进入保护模式：</span></h2> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">在由实模式到保护模式的最大的问题就是内存访问的问题了，现在内存访问问题解决了，那么怎么进入实模式呢？</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">很明显要设置<font face="Times New Roman">GDTR</font><font face="宋体">，还有打开</font><font face="Times New Roman">A20</font><font face="宋体">地址线，一般还要初始化</font><font face="Times New Roman">8259A</font><font face="宋体">中断控制器，最后一步就是设置</font><font face="Times New Roman">CR0</font><font face="宋体">控制寄存器，你可能不知道我在说什么，没关系，我一个个介绍。</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">进入保护模式下后，段寄存器内存的不是绝对地址，而是段选择子的值，例如，我的全局描述符表的第三项是数据段，那么我想将数据段装入<font face="Times New Roman">DS</font><font face="宋体">寄存器，我只需要设置段选择子的高十三位为</font><font face="Times New Roman">2</font><font face="宋体">（从</font><font face="Times New Roman">0</font><font face="宋体">开始）即可，比如后三位为</font><font face="Times New Roman">000</font><font face="宋体">，那么段选择子为</font><font face="Times New Roman">0000&nbsp;<wbr>0000&nbsp;<wbr>0001&nbsp;<wbr>0000</font><font face="宋体">即</font><font face="Times New Roman">0x0010</font><font face="宋体">。现在就是</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>Mov<br> ax,0x0010</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>Mov<br> ds,ax</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">即可设置数据段寄存器。</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">GDTR<font face="宋体">不介绍了。</font></span></p> 
          <h3 style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 16pt; FonT-WeiGHT: bold; mso-spacerun: 'yes'"><br> A20<font face="宋体">地址线：</font></span></h3> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">（来自</span><span><a href="http://hi.baidu.com/yvoilee/blog/item/901476ee40a7a12badafd5e3.html"><span style="FonT-FAMiLY: 'Times new roman'; CoLor: rgb(0,0,255); FonT-siZe: 10.5pt; TexT-DeCorATion: underline; mso-spacerun: 'yes'">http://hi.baidu.com/yvoilee/blog/item/901476ee40a7a12badafd5e3<wbr>.html</span></a></span><span style="FonT-FAMiLY: 'Times new roman'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">）：</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">1981&nbsp;<wbr><font face="宋体">年</font><font face="Times New Roman">8&nbsp;</font><wbr><font face="宋体">月，</font><font face="Times New Roman">IBM&nbsp;</font><wbr><font face="宋体">公司最初推出的个人计算机</font><font face="Times New Roman">IBM&nbsp;</font><wbr>PC&nbsp;<wbr><font face="宋体">使用的</font><font face="Times New Roman">CPU&nbsp;</font><wbr><font face="宋体">是</font><font face="Times New Roman">Intel&nbsp;</font><wbr>8088<font face="宋体">。在该微机中地址线只有</font><font face="Times New Roman">20&nbsp;</font><wbr><font face="宋体">根</font><font face="Times New Roman">(A0&nbsp;</font><wbr><font face="宋体">–&nbsp;</font><wbr><font face="Times New Roman">A19)</font><font face="宋体">。在当时内存</font><font face="Times New Roman">RAM&nbsp;</font><wbr><font face="宋体">只有几百</font><font face="Times New Roman">KB&nbsp;</font><wbr><font face="宋体">或不到</font><font face="Times New Roman">1MB&nbsp;</font><wbr><font face="宋体">时，</font><font face="Times New Roman">20&nbsp;</font><wbr><font face="宋体">根地址线已足够用来寻址这些内存。所以寻址范围是</font><font face="Times New Roman">2^20&nbsp;</font><wbr>=&nbsp;<wbr>1M<font face="宋体">，但</font><font face="Times New Roman">8086/8088</font><font face="宋体">是</font><font face="Times New Roman">16</font><font face="宋体">位的地址模式，即只能表示</font><font face="Times New Roman">FFFFH</font><font face="宋体">（</font><font face="Times New Roman">64K</font><font face="宋体">）的范围。为了能访问</font><font face="Times New Roman">1M</font><font face="宋体">的内存采取了分段的模式。</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">16<font face="宋体">位段基址：</font><font face="Times New Roman">16</font><font face="宋体">位偏移，</font><font face="Times New Roman">0XFFFF:0XFFFF</font><font face="宋体">达到了</font><font face="Times New Roman">0X10FFEF</font><font face="宋体">，因为</font><font face="Times New Roman">8086/8088</font><font face="宋体">的内存不可能超过</font><font face="Times New Roman">1MB</font><font face="宋体">，所以当时的程序超过</font><font face="Times New Roman">1MB</font><font face="宋体">时会自动回卷至</font><font face="Times New Roman">0X0FFEF</font><font face="宋体">。</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">但是到了<font face="Times New Roman">80286</font><font face="宋体">地址线达到</font><font face="Times New Roman">24</font><font face="宋体">跟。而</font><font face="Times New Roman">386</font><font face="宋体">达到</font><font face="Times New Roman">32</font><font face="宋体">根。芯片也达到</font><font face="Times New Roman">32-bit</font><font face="宋体">。寻址能力达到</font><font face="Times New Roman">4GB</font><font face="宋体">。但是为了向后兼容</font><font face="Times New Roman">IBM</font><font face="宋体">采用了一个控制方法。使用一个开关来开启或禁止</font><font face="Times New Roman">0x100000&nbsp;<wbr></font><font face="宋体">地址比特位。由于在当时的</font><font face="Times New Roman">8042</font><font face="宋体">键盘控制器上（注意是键盘控制器上的控制线，而不是地址线的第</font><font face="Times New Roman">20</font><font face="宋体">根）恰好有空闲的端口引脚（输出端口</font><font face="Times New Roman">P2</font><font face="宋体">，引脚</font><font face="Times New Roman">P21</font><font face="宋体">），于是便使用了该引脚来作为与门控制这个地址比特位。该信号即被称为</font><font face="Times New Roman">A20</font><font face="宋体">。如果它为零，则</font><font face="Times New Roman">20-31</font><font face="宋体">的地址线全部被清除，从而实现了兼容性。操作系统从实模式进入保护模式之前要打开</font><font face="Times New Roman">A20</font><font face="宋体">地址线。</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">所以，如果<font face="Times New Roman">A20</font><font face="宋体">被禁止，可访问的内存只能是奇数段（</font><font face="Times New Roman">2N+1</font><font face="宋体">）</font><font face="Times New Roman">M</font><font face="宋体">，只有当</font><font face="Times New Roman">A20</font><font face="宋体">被打开的时候才能访问连续的内存。</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">只有<font face="Times New Roman">A20</font><font face="宋体">打开才能进入保护模式。</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">下面讨论一下如何打开<font face="Times New Roman">A20</font><font face="宋体">地址线：</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">从理论上讲，打开<font face="Times New Roman">A20&nbsp;<wbr>Gate</font><font face="宋体">的方法是通过设置</font><font face="Times New Roman">8042</font><font face="宋体">芯片输出端口（</font><font face="Times New Roman">64h</font><font face="宋体">）的</font><font face="Times New Roman">2nd-bit</font><font face="宋体">，但事实上，当你向</font><font face="Times New Roman">8042</font><font face="宋体">芯片输出端口进行写操作的时候，在键盘缓冲区中，或许还有别的数据尚未处理，因此你必须首先处理这些数据。</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">所以，激活<font face="Times New Roman">A20</font><font face="宋体">地址线的流程为：</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>1.<font face="宋体">关闭中断；</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>2.<font face="宋体">等待</font><font face="Times New Roman">8042&nbsp;</font><wbr>Input&nbsp;<wbr>buffer<font face="宋体">为空；</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>3.<font face="宋体">发送禁止键盘操作命令；</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>4.<font face="宋体">等待</font><font face="Times New Roman">8042&nbsp;</font><wbr>Input&nbsp;<wbr>buffer<font face="宋体">为空；</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>5.<font face="宋体">发送读取</font><font face="Times New Roman">8042&nbsp;</font><wbr>Output&nbsp;<wbr>Port<font face="宋体">命令；</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>6.<font face="宋体">等待</font><font face="Times New Roman">8042&nbsp;</font><wbr>Output&nbsp;<wbr>buffer<font face="宋体">有数据；</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>7.<font face="宋体">读取</font><font face="Times New Roman">8042&nbsp;</font><wbr>Output&nbsp;<wbr>buffer<font face="宋体">，并保存得到的字节；</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>8.<font face="宋体">等待</font><font face="Times New Roman">8042&nbsp;</font><wbr>Input&nbsp;<wbr>buffer<font face="宋体">为空；</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>9.<font face="宋体">发送</font><font face="Times New Roman">Write&nbsp;</font><wbr>8042&nbsp;<wbr>Output&nbsp;<wbr>Port<font face="宋体">命令到</font><font face="Times New Roman">8042&nbsp;</font><wbr>Input&nbsp;<wbr>buffer<font face="宋体">；</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>10.<font face="宋体">等待</font><font face="Times New Roman">8042&nbsp;</font><wbr>Input&nbsp;<wbr>buffer<font face="宋体">为空；</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>11.<font face="宋体">将从</font><font face="Times New Roman">8042&nbsp;</font><wbr>Output&nbsp;<wbr>Port<font face="宋体">得到的字节的第</font><font face="Times New Roman">2</font><font face="宋体">位置</font><font face="Times New Roman">1</font><font face="宋体">（或清</font><font face="Times New Roman">0</font><font face="宋体">），然后写入</font><font face="Times New Roman">8042&nbsp;</font><wbr>Input&nbsp;<wbr>buffer<font face="宋体">；</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>12.<font face="宋体">等待，直到</font><font face="Times New Roman">8042&nbsp;</font><wbr>Input&nbsp;<wbr>buffer<font face="宋体">为空为止；</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>13.<font face="宋体">发送允许键盘操作命令到</font><font face="Times New Roman">8042&nbsp;</font><wbr>Input&nbsp;<wbr>buffer<font face="宋体">；</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>14.&nbsp;<wbr><font face="宋体">打开中断。&nbsp;</font><wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">下面是完成打开<font face="Times New Roman">A20&nbsp;<wbr>Gate</font><font face="宋体">的代码：&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr></font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">A20Enable:</span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>cli&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>;1.<font face="宋体">关闭中断</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>call&nbsp;<wbr>WaitInbufEmpty&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>;2.<font face="宋体">等待</font><font face="Times New Roman">8042&nbsp;</font><wbr>Input&nbsp;<wbr>buffer<font face="宋体">为空；</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>mov&nbsp;<wbr>al,&nbsp;<wbr>0adh</span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>mov&nbsp;<wbr>dx,&nbsp;<wbr>64h</span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>out&nbsp;<wbr>dx,&nbsp;<wbr>al&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>;3.<font face="宋体">发送禁止键盘操作命令</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>call&nbsp;<wbr>WaitInbufEmpty&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>;4.<font face="宋体">等待</font><font face="Times New Roman">8042&nbsp;</font><wbr>Input&nbsp;<wbr>buffer<font face="宋体">为空；</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>mov&nbsp;<wbr>al,&nbsp;<wbr>0d0h</span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>mov&nbsp;<wbr>dx,&nbsp;<wbr>64h</span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>out&nbsp;<wbr>dx,&nbsp;<wbr>al&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>;5.<font face="宋体">发送读取</font><font face="Times New Roman">8042&nbsp;</font><wbr>Output&nbsp;<wbr>Port<font face="宋体">命令；</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>call&nbsp;<wbr>WaitOutbufFull&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>;6.<font face="宋体">等待</font><font face="Times New Roman">8042&nbsp;</font><wbr>Output&nbsp;<wbr>buffer<font face="宋体">有数据；</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>mov&nbsp;<wbr>dx,&nbsp;<wbr>60h</span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>in&nbsp;<wbr>al,&nbsp;<wbr>dx&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>;7.<font face="宋体">读取</font><font face="Times New Roman">8042&nbsp;</font><wbr>Output&nbsp;<wbr>buffer</span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>push&nbsp;<wbr>ax&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>;<font face="宋体">保存读取的数据</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>call&nbsp;<wbr>WaitInbufEmpty&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>;8.<font face="宋体">等待</font><font face="Times New Roman">8042&nbsp;</font><wbr>Input&nbsp;<wbr>buffer<font face="宋体">为空；</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>mov&nbsp;<wbr>al,&nbsp;<wbr>0d1h</span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>mov&nbsp;<wbr>dx,&nbsp;<wbr>64h</span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>out&nbsp;<wbr>dx,&nbsp;<wbr>al&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>;9.<font face="宋体">发送写&nbsp;</font><wbr><font face="Times New Roman">8042&nbsp;</font><wbr>Output&nbsp;<wbr>Port<font face="宋体">命令</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>call&nbsp;<wbr>WaitInbufEmpty&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>;10.<font face="宋体">等待</font><font face="Times New Roman">8042&nbsp;</font><wbr>Input&nbsp;<wbr>buffer<font face="宋体">为空</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>pop&nbsp;<wbr>ax</span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>or&nbsp;<wbr>al,&nbsp;<wbr>02h&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>;11.<font face="宋体">将从</font><font face="Times New Roman">8042&nbsp;</font><wbr>Output&nbsp;<wbr>Port<font face="宋体">得到的字节的</font><font face="Times New Roman">bit&nbsp;</font><wbr>1<font face="宋体">置</font><font face="Times New Roman">1</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>mov&nbsp;<wbr>dx,&nbsp;<wbr>60h</span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>out&nbsp;<wbr>dx,&nbsp;<wbr>al&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>;<font face="宋体">写入</font><font face="Times New Roman">Output&nbsp;</font><wbr>Port</span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>call&nbsp;<wbr>WaitInbufEmpty&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>;12.<font face="宋体">等待</font><font face="Times New Roman">8042&nbsp;</font><wbr>Input&nbsp;<wbr>buffer<font face="宋体">为空</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>mov&nbsp;<wbr>al,&nbsp;<wbr>0aeh</span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>mov&nbsp;<wbr>dx,&nbsp;<wbr>64h</span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>out&nbsp;<wbr>dx,&nbsp;<wbr>al&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>;13.<font face="宋体">发送允许键盘操作命令</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>sti&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>;<font face="宋体">开中断</font></span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>ret&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>WaitInbufEmpty:</span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>mov&nbsp;<wbr>dx,&nbsp;<wbr>64h</span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>in&nbsp;<wbr>al,&nbsp;<wbr>dx&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>;<font face="宋体">读取</font><font face="Times New Roman">Status&nbsp;</font><wbr>Register</span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>test&nbsp;<wbr>al,&nbsp;<wbr>02h</span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>jnz&nbsp;<wbr>WaitInbufEmpty</span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>retWaitOutbufFull:</span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>mov&nbsp;<wbr>dx,&nbsp;<wbr>64h</span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>in&nbsp;<wbr>al,&nbsp;<wbr>dx</span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>test&nbsp;<wbr>al,&nbsp;<wbr>01&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>;<font face="宋体">读取</font><font face="Times New Roman">Status&nbsp;</font><wbr>Register</span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>jz&nbsp;<wbr>WaitOutbufFull</span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'"><br> </span><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>ret</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">后来，由于感觉使用<font face="Times New Roman">8042</font><font face="宋体">控制</font><font face="Times New Roman">A20</font><font face="宋体">运行太慢了（确实，那么长的代码，中间还要若干次的</font><font face="Times New Roman">wait</font><font face="宋体">），所以后来又出现了所谓的</font><font face="Times New Roman">Fast&nbsp;<wbr>A20</font><font face="宋体">，实际上，现在的大多数机器都是</font><font face="Times New Roman">Fast&nbsp;<wbr>A20</font><font face="宋体">，</font><font face="Times New Roman">Fast&nbsp;<wbr>A20</font><font face="宋体">使用</font><font face="Times New Roman">92h</font><font face="宋体">端口控制</font><font face="Times New Roman">A20</font><font face="宋体">，同时</font><font face="Times New Roman">BIOS</font><font face="宋体">里提供了一个软中断来控制</font><font face="Times New Roman">A20</font><font face="宋体">：</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>入口：<font face="Times New Roman">ah=24h</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>al=0&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr><font face="宋体">关闭</font><font face="Times New Roman">A20</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>1&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr><font face="宋体">打开</font><font face="Times New Roman">A20</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>2&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr><font face="宋体">读取</font><font face="Times New Roman">A20</font><font face="宋体">状态</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>int&nbsp;<wbr>15h</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>返回：如果<font face="Times New Roman">BIOS</font><font face="宋体">支持此功能，</font><font face="Times New Roman">CF=0</font><font face="宋体">，否则</font><font face="Times New Roman">CF=1</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>CF=0<font face="宋体">时，</font><font face="Times New Roman">AX</font><font face="宋体">返回当前</font><font face="Times New Roman">A20</font><font face="宋体">状态，</font><font face="Times New Roman">1=</font><font face="宋体">打开，</font><font face="Times New Roman">0=</font><font face="宋体">关闭</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>像<font face="Times New Roman">8042</font><font face="宋体">中的</font><font face="Times New Roman">Output&nbsp;</font><wbr>Port<font face="宋体">中的定义一样，</font><font face="Times New Roman">92h</font><font face="宋体">端口的</font><font face="Times New Roman">bit&nbsp;</font><wbr>1<font face="宋体">控制着</font><font face="Times New Roman">A20</font><font face="宋体">，为</font><font face="Times New Roman">1</font><font face="宋体">时打开，为</font><font face="Times New Roman">0</font><font face="宋体">时关闭，从</font><font face="Times New Roman">92h</font><font face="宋体">中读一个</font><font face="Times New Roman">byte</font><font face="宋体">可以看</font><font face="Times New Roman">a20</font><font face="宋体">的当前状态，所以对</font><font face="Times New Roman">92h</font><font face="宋体">的操作如下：</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">&nbsp;<wbr></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">读<font face="Times New Roman">A20</font><font face="宋体">状态</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov&nbsp;<wbr>dx,&nbsp;<wbr>92h</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">in&nbsp;<wbr>al,&nbsp;<wbr>dx</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">如果<font face="Times New Roman">al</font><font face="宋体">的</font><font face="Times New Roman">bit&nbsp;<wbr>1</font><font face="宋体">为</font><font face="Times New Roman">1</font><font face="宋体">表示</font><font face="Times New Roman">a20</font><font face="宋体">打开，否则为</font><font face="Times New Roman">0</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">打开<font face="Times New Roman">A20</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov&nbsp;<wbr>dx,&nbsp;<wbr>92h</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov&nbsp;<wbr>al,&nbsp;<wbr>02</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">out&nbsp;<wbr>dx,&nbsp;<wbr>al</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">关闭<font face="Times New Roman">A20</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov&nbsp;<wbr>dx,&nbsp;<wbr>92h</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov&nbsp;<wbr>al,&nbsp;<wbr>0</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">out&nbsp;<wbr>dx,&nbsp;<wbr>al</span></p> 
          <p style="Line-HeiGHT: 15pt; MArGin-Top: 0pt; MArGin-BoTToM: 0pt; TexT-AUTospACe: ; WorD-BreAK: break-all"> &nbsp;<wbr></p> 
          <h3 style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 16pt; FonT-WeiGHT: bold; mso-spacerun: 'yes'"><br> 8259A<font face="宋体">中断控制器：</font></span></h3> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">有关<font face="Times New Roman">8259A</font><font face="宋体">可以参看齐志儒、高福祥《汇编语言程序设计》第</font><font face="Times New Roman">240</font><font face="宋体">页，特别是端口的设置，初始化等。</font></span></p> 
          <h3 style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 16pt; FonT-WeiGHT: bold; mso-spacerun: 'yes'"><br> CR0<font face="宋体">控制寄存器：</font></span></h3> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">关于控制寄存器，其实是有<font face="Times New Roman">4</font><font face="宋体">个，分别为</font><font face="Times New Roman">CR0~CR3</font><font face="宋体">，结构如下：</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <a href="http://photo.blog.sina.com.cn/showpic.html#blogid=6730a3aa01010liv&amp;url=http://s14.sinaimg.cn/orignal/6730a3aatbae517cd1d8d" target="_blank"><img name="image_operate_90941331392917974" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" real_src="http://s14.sinaimg.cn/middle/6730a3aatbae517cd1d8d&amp;690" width="690" height="188" alt="操作系统引导--从实模式到保护模式" title="操作系统引导--从实模式到保护模式"></a></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">其中，要想开启保护模式，需要将<font face="Times New Roman">CR0</font><font face="宋体">的</font><font face="Times New Roman">PE</font><font face="宋体">位。当真正置位时，</font><font face="Times New Roman">cpu</font><font face="宋体">才会真正运行在保护模式下。</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">为了配合实践，特意使用了下面引导程序来说明<font face="Times New Roman">(</font><font face="宋体">语言：</font><font face="Times New Roman">nasm)</font><font face="宋体">：</font></span></p> 
          <h3 style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 16pt; FonT-WeiGHT: bold; mso-spacerun: 'yes'"><br> boot.asm:</span></h3> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">org</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x7c00</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;<font face="宋体">定位到</font><font face="Times New Roman">0x7c00</font><font face="宋体">处</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">jmp</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">start</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">SETUPSEG</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">equ</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x9000</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;<font face="宋体">将</font><font face="Times New Roman">setup</font><font face="宋体">程序读到内存的绝对地址</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">DATASEG</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">equ</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x8000</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;<font face="宋体">一般数据的保存地址</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ROOT_DEV</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">db</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;<font face="宋体">启动设备号</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">start:</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ax,cs</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ds,ax</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">es,ax</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ss,ax</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">[ROOT_DEV],dl</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;<font face="宋体">保存启动设备号</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">call</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">load_msg</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;<font face="宋体">显示启动信息</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ax,DATASEG</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ds,ax</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">[0],dl</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;<font face="宋体">将设备号保存至</font><font face="Times New Roman">0x8000:0x0000</font><font face="宋体">处</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ax,cs</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ds,ax</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">load_setup:</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;<font face="宋体">从磁盘的第二扇区读取</font><font face="Times New Roman">1KB</font><font face="宋体">至</font><font face="Times New Roman">0x9000:0x0000</font><font face="宋体">处</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ax,SETUPSEG</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">es,ax</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">xor</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">bx,bx</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ax,0x0202</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">dl,[ROOT_DEV]</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">dh,0</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">cx,0x0002</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">int</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x13</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;<font face="宋体">磁盘读取</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">jnc</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ok_load_setup</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ax,0</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">dx,0</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">int</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x13</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;<font face="宋体">磁盘复位</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">jmp</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">load_setup</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ok_load_setup:</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">jmp</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">SETUPSEG:0x0000</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">load_msg:</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">call</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">load_curser</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ax,loadmessage</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">cx,18</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">bp,ax</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ax,0x1301</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">bx,0x000c</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">int</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x10</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ret</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">load_curser:</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ah,0x03</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">xor</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">bh,bh</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">int</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x10</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ret</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">loadmessage</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">db</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">“Booting&nbsp;<wbr>diers…”</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">db</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">13,10</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">times</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">510-($-$$)</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">db</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;<font face="宋体">保证</font><font face="Times New Roman">512</font><font face="宋体">字节</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">dw</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0xaa55</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;<font face="宋体">设置引导标志</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <h3 style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 16pt; FonT-WeiGHT: bold; mso-spacerun: 'yes'"><br> set.asm:</span></h3> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">org</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x0000</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">jmp</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">start</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">SETUPSEG</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">equ</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x9000</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">DATASEG</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">equ</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x8000</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">SETSEG</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">equ</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x0400</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;set<font face="宋体">程序读入</font><font face="Times New Roman">0x9000:0x0400</font><font face="宋体">处</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">gdtaddr:</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;GDTR<font face="宋体">寄存器的值</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">dw</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x7fff</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">dw</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">gdt</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">dw</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x0009</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">gdt:</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">gdtnull:</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">dw</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0,0,0,0</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;<font face="宋体">第一个描述符没用，但是需要存在</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">gdtsyscode:</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;<font face="宋体">第一个代码段</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">dw</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x07ff</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">dw</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x0000</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">dw</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x9a00</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">dw</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x00c0</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">gdtsysdata:</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;<font face="宋体">第一个数据段</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">dw</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x07ff</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">dw</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x0000</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">dw</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x9200</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">dw</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x00c0</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">idtaddr:</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;IDTR<font face="宋体">的值，暂时设置为空</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">dw</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x000</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">dw</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x000</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">dw</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x000</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">start:</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">call</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">load_msg</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;<font face="宋体">显示信息</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ax,DATASEG</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ds,ax</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">dl,[0]</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">bx,SETSEG</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ax,0x0208</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">dh,0</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">cx,0x0004</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">int</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x13</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;<font face="宋体">读取</font><font face="Times New Roman">set</font><font face="宋体">程序员</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">jnc</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ok_load_set</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ax,0</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">dx,0</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">int</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x13</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;<font face="宋体">磁盘复位</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">jmp</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">start</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ok_load_set:</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;;&nbsp;<wbr>;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;;&nbsp;<wbr><font face="宋体">此处可以自由添加代码，硬件检测等</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;;&nbsp;<wbr>;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">call</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">open_a20</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;<font face="宋体">打开</font><font face="Times New Roman">A20</font><font face="宋体">地址线</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">cli</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;<font face="宋体">关闭全部中断</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">call</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">move_set</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;<font face="宋体">将</font><font face="Times New Roman">set</font><font face="宋体">程序移动到</font><font face="Times New Roman">0x0000:0x0000</font><font face="宋体">处</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">lgdt</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">[gdtaddr]</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;<font face="宋体">设置</font><font face="Times New Roman">GDTR</font><font face="宋体">的值</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">lidt</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">[idtaddr]</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;<font face="宋体">设置</font><font face="Times New Roman">IDTR</font><font face="宋体">的值</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">call</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">init_8259a</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;<font face="宋体">初始化</font><font face="Times New Roman">8259A</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">call</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">set_cr0</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;<font face="宋体">设置</font><font face="Times New Roman">CR0</font><font face="宋体">的值</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">jmp</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x8:0x0</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;<font face="宋体">跳到第一个代码段</font></span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">load_msg:</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">call</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">load_curser</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ax,cs</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">es,ax</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ax,loadmessage</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">cx,16</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">bp,ax</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ax,0x1301</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">bx,0x000c</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">int</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x10</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ret</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">load_curser:</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ah,0x03</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">xor</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">bh,bh</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">int</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x10</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ret</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">open_a20:</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ah,0x24</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">al,1</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">int</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x15</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ret</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">move_set:</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">cld</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ax,SETUPSEG</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ds,ax</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">si,SETSEG</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ax,0x0000</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">es,ax</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">xor</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">di,di</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">cx,2048</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">rep</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">movsw</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ret</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">init_8259a:</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">al,0x11</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">out</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x20,al</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">call</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">io_delay</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">out</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0xa0,al</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">call</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">io_delay</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">al,0x20</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">out</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x21,al</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">call</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">io_delay</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">al,0x28</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">out</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0xa1,al</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">call</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">io_delay</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">al,0x04</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">out</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x21,al</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">call</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">io_delay</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">al,0x02</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">out</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0xa1,al</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">call</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">io_delay</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">al,0x01</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">out</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x21,al</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">call</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">io_delay</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">out</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0xa1,al</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">call</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">io_delay</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">al,0xff</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">out</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x21,al</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">call</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">io_delay</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">out</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0xa1,al</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">call</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">io_delay</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ret</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">io_delay:</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">bx,bx</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">bx,bx</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">bx,bx</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ret</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">set_cr0:</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">eax,cr0</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">or</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">eax,1</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">cr0,eax</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ret</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">loadmessage:</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">db</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">“Setup&nbsp;<wbr>diers…”</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">db</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">13,10</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">times</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">1024-($-$$)</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">db</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0</span></p> 
          <p style="TexT-ALiGn: justify; MArGin-Top: 0pt; TexT-inDenT: 21pt; MArGin-BoTToM: 0pt; TexT-AUTospACe:"> &nbsp;<wbr></p> 
          <h3 style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 16pt; FonT-WeiGHT: bold; mso-spacerun: 'yes'"><br> set.asm:</span></h3> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">[BITS&nbsp;<wbr>32]</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">org</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0x0</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">jmp</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">start</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"> &nbsp;<wbr></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">start:</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ax,0x10</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">ds,ax</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"> &nbsp;<wbr></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">xor</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">esi,esi</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">cl,’a’</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">dl,0x04</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">show:</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">;;<font face="宋体">设置显存直接设置显示字符</font></span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">[0xb8000+esi],cl</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mov</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">[0xb8001+esi],dl</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">inc&nbsp;<wbr></span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">dl</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">inc</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">esi</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">inc</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">esi</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">inc</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">cl</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">cmp</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">si,10000</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">je</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">end_show</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">jmp</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">show</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"> &nbsp;<wbr></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">end_show:</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">jmp</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">$</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"> &nbsp;<wbr></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">编译为：</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">nasm&nbsp;<wbr>-o&nbsp;<wbr>boot.bin&nbsp;<wbr>boot.asm</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">nasm&nbsp;<wbr>-o&nbsp;<wbr>setup.bin&nbsp;<wbr>setup.asm</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">nasm&nbsp;<wbr>-o&nbsp;<wbr>set.bin&nbsp;<wbr>set.asm</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">运行的时候可以使用软盘映像，你可以使用<font face="Times New Roman">C</font><font face="宋体">语言创建一个</font><font face="Times New Roman">1.44MB</font><font face="宋体">的二进制文件，里面可以直接全部写</font><font face="Times New Roman">0</font><font face="宋体">，然后下面程序可以写入：</font></span></p> 
          <h3 style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 16pt; FonT-WeiGHT: bold; mso-spacerun: 'yes'"><br> write.c:</span></h3> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">#include&lt;stdio.h&gt;</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">#include&lt;stdlib.h&gt;</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"> &nbsp;<wbr></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">int&nbsp;<wbr>main()</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">{</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">FILE&nbsp;<wbr>*fp=NULL;</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">FILE&nbsp;<wbr>*fp1=NULL;</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">char&nbsp;<wbr>s[100];</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">char&nbsp;<wbr>s1[100];</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">char&nbsp;<wbr>c;</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">int&nbsp;<wbr>mark=0;</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">long&nbsp;<wbr>pos;</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">printf(“please&nbsp;<wbr>enter&nbsp;<wbr>the&nbsp;<wbr>name&nbsp;<wbr>of&nbsp;<wbr>file:”);</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">scanf(“%s”,s);</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">fp=fopen(s,”rb”);</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">if(NULL==fp)</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">{</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">printf(“Have&nbsp;<wbr>no&nbsp;<wbr>such&nbsp;<wbr>file!n”);</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">return&nbsp;<wbr>0;</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">}</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">printf(“please&nbsp;<wbr>enter&nbsp;<wbr>the&nbsp;<wbr>image&nbsp;<wbr>file&nbsp;<wbr>name:”);</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">scanf(“%s”,s1);</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">fp1=fopen(s1,”rb+”);</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">if(NULL==fp1)</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">{</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">printf(“Have&nbsp;<wbr>no&nbsp;<wbr>such&nbsp;<wbr>file!n”);</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">return&nbsp;<wbr>0;</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">}</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">printf(“please&nbsp;<wbr>input&nbsp;<wbr>the&nbsp;<wbr>position&nbsp;<wbr>of&nbsp;<wbr>the&nbsp;<wbr>file&nbsp;<wbr>you&nbsp;<wbr>want&nbsp;<wbr>to&nbsp;<wbr>write:”);</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">scanf(“%ld”,&amp;pos);</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">fseek(fp1,pos,0);</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"> &nbsp;<wbr></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">while(!feof(fp))</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">{</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">if(mark)</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">{</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">fputc(c,fp1);</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">//</span><br> <span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">printf(“%x&nbsp;<wbr>&nbsp;<wbr>“,c);</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">}</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">c=fgetc(fp);</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">mark=1;</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">}</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">c=240;</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">fputc(c,fp1);</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">c=255;</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">fputc(c,fp1);</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">fputc(c,fp1);</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">fclose(fp);</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">fclose(fp1);</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">printf(“write&nbsp;<wbr>ok!n”);</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">system(“pause”);</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"> &nbsp;<wbr></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">return&nbsp;<wbr>0;</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">}</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">程序使用<font face="Times New Roman">bochs</font><font face="宋体">调试，关于</font><font face="Times New Roman">bochs</font><font face="宋体">可以直接去百度搜，也可以直接使用虚拟机运行</font><font face="Times New Roman">img</font><font face="宋体">文件。</font></span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">编译一下：<font face="Times New Roman">gcc&nbsp;<wbr>write.c</font><font face="宋体">（在</font><font face="Times New Roman">windows</font><font face="宋体">下使用</font><font face="Times New Roman">MinGW</font><font face="宋体">的</font><font face="Times New Roman">gcc</font><font face="宋体">编译）</font></span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">可以使用批处理来编译等。比如我的汇编源程序保存在<font face="Times New Roman">F:huibianDiers</font><font face="宋体">里面，而</font><font face="Times New Roman">write.c</font><font face="宋体">保存在桌面上</font><font face="Times New Roman">OS&nbsp;<wbr>testimagewriter</font><font face="宋体">里面，里面还有</font><font face="Times New Roman">Diers.img</font><font face="宋体">软盘映像文件，里面还有文件如下：</font></span></p> 
          <h3 style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 16pt; FonT-WeiGHT: bold; mso-spacerun: 'yes'"><br> in1.txt:</span></h3> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">boot.bin</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">Diers.img</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">0</span></p> 
          <h3 style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 16pt; FonT-WeiGHT: bold; mso-spacerun: 'yes'"><br> in2.txt:</span></h3> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">setup.bin</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">Diers.img</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">512</span></p> 
          <h3 style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 16pt; FonT-WeiGHT: bold; mso-spacerun: 'yes'"><br> in3.txt:</span></h3> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">set.bin</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">Diers.img</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">1536</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">我的<font face="Times New Roman">bochs</font><font face="宋体">调试文件放在桌面上</font><font face="Times New Roman">OS&nbsp;<wbr>testbochs</font><font face="宋体">里面，里面还放了一个</font><font face="Times New Roman">set.bat</font><font face="宋体">批处理文件，内容如下：</font></span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">F:</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">cd&nbsp;<wbr>huibianDiers</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">nasm&nbsp;<wbr>-o&nbsp;<wbr>boot.bin&nbsp;<wbr>boot.asm</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">nasm&nbsp;<wbr>-o&nbsp;<wbr>setup.bin&nbsp;<wbr>setup.asm</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">nasm&nbsp;<wbr>-o&nbsp;<wbr>set.bin&nbsp;<wbr>set.asm</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">xcopy&nbsp;<wbr>boot.bin&nbsp;<wbr>C:UsersAdministratorDesktop”OS&nbsp;<wbr>test”imagewriterboot.bin&nbsp;<wbr>/Y</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">xcopy&nbsp;<wbr>setup.bin&nbsp;<wbr>C:UsersAdministratorDesktop”OS&nbsp;<wbr>test”imagewritersetup.bin&nbsp;<wbr>/Y</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">xcopy&nbsp;<wbr>set.bin&nbsp;<wbr>C:UsersAdministratorDesktop”OS&nbsp;<wbr>test”imagewriterset.bin&nbsp;<wbr>/Y</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">C:</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">cd&nbsp;<wbr>C:UsersAdministratorDesktop”OS&nbsp;<wbr>test”imagewriter</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">a.exe&nbsp;<wbr>&lt;in1.txt</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">a.exe&nbsp;<wbr>&lt;in2.txt</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">a.exe&nbsp;<wbr>&lt;in3.txt</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">xcopy&nbsp;<wbr>Diers.img&nbsp;<wbr>C:UsersAdministratorDesktop”OS&nbsp;<wbr>test”bochsDiers.img&nbsp;<wbr>/Y</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"> &nbsp;<wbr></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">Pause</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">需要调试运行的时候直接双击<font face="Times New Roman">set.bat</font><font face="宋体">文件，会在</font><font face="Times New Roman">bochs</font><font face="宋体">文件夹出现</font><font face="Times New Roman">Diers.img</font><font face="宋体">文件，使用</font><font face="Times New Roman">bochs</font><font face="宋体">运行或者使用虚拟机运行都可。</font></span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"> &nbsp;<wbr></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">运行效果图：</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><a href="http://photo.blog.sina.com.cn/showpic.html#blogid=6730a3aa01010liv&amp;url=http://s3.sinaimg.cn/orignal/6730a3aatbae518e16672" target="_blank"><img name="image_operate_62191331392940118" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" real_src="http://s3.sinaimg.cn/middle/6730a3aatbae518e16672&amp;690" alt="操作系统引导--从实模式到保护模式" title="操作系统引导--从实模式到保护模式"></a></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"> &nbsp;<wbr></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">参考文献：</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">《操作系统引导探究》<font face="Times New Roman">(Version&nbsp;<wbr>0.02)&nbsp;<wbr></font><font face="宋体">谢煜波</font></span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">《<font face="Times New Roman">Linux</font><font face="宋体">内核完全注释》修正版</font><font face="Times New Roman">V1.9.5&nbsp;<wbr></font><font face="宋体">赵炯</font></span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">《<font face="Times New Roman">Linux0.11</font><font face="宋体">源码分析》</font><font face="Times New Roman">Version0.1&nbsp;<wbr></font><font face="宋体">潘晓雷</font></span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">《自己动手写操作系统》&nbsp;<wbr>于渊&nbsp;<wbr>编著，&nbsp;<wbr>尤晋元&nbsp;<wbr>审校</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">《微机原理与接口技术》第<font face="Times New Roman">2</font><font face="宋体">版&nbsp;<wbr>周明德&nbsp;<wbr>主编，周明德、蒋本珊&nbsp;<wbr>著</font></span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">《汇编语言程序设计》&nbsp;<wbr>齐志儒、高福祥&nbsp;<wbr>主编</span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"><span style="FonT-FAMiLY: '宋体'; FonT-siZe: 10.5pt; mso-spacerun: 'yes'">百度空间：</span><span><a href="http://hi.baidu.com/yvoilee/blog/item/901476ee40a7a12badafd5e3.html"><span style="FonT-FAMiLY: 'Times new roman'; CoLor: rgb(0,0,255); FonT-siZe: 10.5pt; TexT-DeCorATion: underline; mso-spacerun: 'yes'">http://hi.baidu.com/yvoilee/blog/item/901476ee40a7a12badafd5e3<wbr>.html</span></a></span></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt"> &nbsp;<wbr></p> 
          <p style="MArGin-Top: 0pt; MArGin-BoTToM: 0pt">文章更正篇：<a href="http://blog.sina.com.cn/s/blog_6730a3aa01010xrc.html">http://blog.sina.com.cn/s/blog_6730a3aa01010xrc.html</a></p> 
         </div> 
        </div>
       </div>
       <!-- .entry-content --> 
       <!-- .entry-meta --> 
      </article>
      <!-- #post-220 --> 
      <!-- #comments --> 
     </div>
     <!-- #content --> 
    </div>
    <!-- #primary --> 
    <!-- #secondary .widget-area --> 
   </div>
   <!-- #main --> 
   <!-- #colophon --> 
  </div>
  <!-- #page -->   
  <!-- JiaThis Button BEGIN -->  
  <!-- JiaThis Button END -->   
 </body>
</html>