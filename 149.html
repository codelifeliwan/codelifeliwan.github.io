<!doctype html>
<!--[if IE 6]>
<html id="ie6" lang="zh-CN">
<![endif]-->
<!--[if IE 7]>
<html id="ie7" lang="zh-CN">
<![endif]-->
<!--[if IE 8]>
<html id="ie8" lang="zh-CN">
<![endif]-->
<!--[if !(IE 6) | !(IE 7) | !(IE 8)  ]><!-->
<html lang="zh-CN">
 <!--<![endif]-->
 <head>      
  <link rel="stylesheet" type="text/css" media="all" href="stylesheets/style.css">     
  <link rel="stylesheet" id="codebox-css" href="stylesheets/codebox.css" type="text/css" media="screen">             
 </head> 
 <body class="single single-post postid-149 single-format-standard content-sidebar"> 
  <div id="page" class="hfeed"> 
   <header id="branding" role="banner"> 
    <hgroup> 
     <h1 id="site-title"><span><a href="http://codelifeliwan.github.io/" title="Code_Life_LiWan" rel="home">Code_Life_LiWan</a></span></h1> 
     <h2 id="site-description">My heart will go on and on…</h2> 
    </hgroup>  
    <!-- #access --> 
   </header>
   <!-- #branding --> 
   <div id="main" class="clearfix"> 
    <div id="primary"> 
     <div id="content" role="main"> 
      <!-- #nav-single --> 
      <article id="post-149" class="post-149 post type-post status-publish format-standard hentry category-acm tag-uva"> 
       <header class="entry-header"> 
        <h1 class="entry-title">UVA&nbsp;437&nbsp;–&nbsp;The&nbsp;Tower&nbsp;of&nbsp;Babylon&nbsp;（DAG上的DP，重在建图）</h1> 
        <div class="entry-meta"> 
         <span class="sep">Posted on </span>
         <a href="http://codelifeliwan.github.io/?p=149" title="下午 5:02" rel="bookmark"><time class="entry-date" datetime="2011-08-13T17:02:25+00:00" pubdate>13 八月, 2011</time></a>
         <span class="by-author"> <span class="sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://codelifeliwan.github.io/?author=1" title="View all posts by wanli" rel="author">wanli</a></span></span> 
         <span class="sep"> — </span> 
         <span class="comments-link"> <a href="http://codelifeliwan.github.io/?p=149#respond" title="Comment on UVA&nbsp;437&nbsp;–&nbsp;The&nbsp;Tower&nbsp;of&nbsp;Babylon&nbsp;（DAG上的DP，重在建图）">No Comments ↓</a> </span> 
        </div>
        <!-- .entry-meta --> 
       </header>
       <!-- .entry-header --> 
       <div class="entry-content">
        <div class="entry-content"> 
         <p> 题目：</p> 
         <div> 
          <table bgcolor="#0060F0"> 
           <tbody> 
            <tr> 
             <td><b><a name="SECTION0001000000000000000000"><font color="#C0FFFF" size="5">The<br> Tower of Babylon</font></a>&nbsp;<wbr></b></td> 
            </tr> 
           </tbody> 
          </table> 
          <p>Perhaps you have heard of the legend of the Tower of Babylon.<br> Nowadays many details of this tale have been forgotten. So now, in<br> line with the educational nature of this contest, we will tell you<br> the whole story:</p> 
          <p>The babylonians had <i>n</i> types of blocks, and an unlimited<br> supply of blocks of each type. Each type-<i>i</i> block was a<br> rectangular solid with linear dimensions <img alt="tex2html_wrap_inline32" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" real_src="http://uva.onlinejudge.org/external/4/437img1.gif" height="27" width="68" align="middle" title="UVA&nbsp;<wbr>437&nbsp;<wbr>-&nbsp;<wbr>The&nbsp;<wbr>Tower&nbsp;<wbr>of&nbsp;<wbr>Babylon&nbsp;<wbr>（DAG上的DP，重在建图）"><wbr>437&nbsp;<wbr>-&nbsp;<wbr>The&nbsp;<wbr>Tower&nbsp;<wbr>of&nbsp;<wbr>Babylon&nbsp;<wbr>（DAG上的DP，重在建图）” /&gt; . A block could be reoriented so that<br> any two of its three dimensions determined the dimensions of the<br> base and the other dimension was the height. They wanted to<br> construct the tallest tower possible by stacking blocks. The<br> problem was that, in building a tower, one block could only be<br> placed on top of another block as long as the two base dimensions<br> of the upper block were both strictly smaller than the<br> corresponding base dimensions of the lower block. This meant, for<br> example, that blocks oriented to have equal-sized bases couldn’t be<br> stacked.</p> 
          <p>Your job is to write a program that determines the height of the<br> tallest tower the babylonians can build with a given set of<br> blocks.</p> 
          <h2><a name="SECTION0001001000000000000000"><font color="#0070E8">Input and<br> Output</font></a></h2> 
          <p>The input file will contain one or more test cases. The first<br> line of each test case contains an integer <i>n</i>, representing<br> the number of different blocks in the following data set. The<br> maximum value for <i>n</i> is 30. Each of the next <i>n</i> lines<br> contains three integers representing the values <img alt="tex2html_wrap_inline40" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" real_src="http://uva.onlinejudge.org/external/4/437img2.gif" height="17" width="13" align="middle" title="UVA&nbsp;<wbr>437&nbsp;<wbr>-&nbsp;<wbr>The&nbsp;<wbr>Tower&nbsp;<wbr>of&nbsp;<wbr>Babylon&nbsp;<wbr>（DAG上的DP，重在建图）"><wbr>437&nbsp;<wbr>-&nbsp;<wbr>The&nbsp;<wbr>Tower&nbsp;<wbr>of&nbsp;<wbr>Babylon&nbsp;<wbr>（DAG上的DP，重在建图）” /&gt; , <img alt="tex2html_wrap_inline42" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" real_src="http://uva.onlinejudge.org/external/4/437img3.gif" height="17" width="11" align="middle" title="UVA&nbsp;<wbr>437&nbsp;<wbr>-&nbsp;<wbr>The&nbsp;<wbr>Tower&nbsp;<wbr>of&nbsp;<wbr>Babylon&nbsp;<wbr>（DAG上的DP，重在建图）"><wbr>437&nbsp;<wbr>-&nbsp;<wbr>The&nbsp;<wbr>Tower&nbsp;<wbr>of&nbsp;<wbr>Babylon&nbsp;<wbr>（DAG上的DP，重在建图）” /&gt; and <img alt="tex2html_wrap_inline44" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" real_src="http://uva.onlinejudge.org/external/4/437img4.gif" height="17" width="11" align="middle" title="UVA&nbsp;<wbr>437&nbsp;<wbr>-&nbsp;<wbr>The&nbsp;<wbr>Tower&nbsp;<wbr>of&nbsp;<wbr>Babylon&nbsp;<wbr>（DAG上的DP，重在建图）"><wbr>437&nbsp;<wbr>-&nbsp;<wbr>The&nbsp;<wbr>Tower&nbsp;<wbr>of&nbsp;<wbr>Babylon&nbsp;<wbr>（DAG上的DP，重在建图）” /&gt; .</p> 
          <p>Input is terminated by a value of zero (0) for <i>n</i>.</p> 
          <p>For each test case, print one line containing the case number<br> (they are numbered sequentially starting from 1) and the height of<br> the tallest possible tower in the format “<tt>Case</tt><br> <em>case</em><tt>: maximum height =</tt> <em>height</em>“</p> 
          <h2><a name="SECTION0001002000000000000000"><font color="#0070E8">Sample<br> Input</font></a></h2> 
          <pre>
1
</pre> 
          <pre>
10 20 30
</pre> 
          <pre>
2
</pre> 
          <pre>
6 8 10
</pre> 
          <pre>
5 5 5
</pre> 
          <pre>
7
</pre> 
          <pre>
1 1 1
</pre> 
          <pre>
2 2 2
</pre> 
          <pre>
3 3 3
</pre> 
          <pre>
4 4 4
</pre> 
          <pre>
5 5 5
</pre> 
          <pre>
6 6 6
</pre> 
          <pre>
7 7 7
</pre> 
          <pre>
5
</pre> 
          <pre>
31 41 59
</pre> 
          <pre>
26 53 58
</pre> 
          <pre>
97 93 23
</pre> 
          <pre>
84 62 64
</pre> 
          <pre>
33 83 27
</pre> 
          <pre>
0
</pre> 
          <h2><a name="SECTION0001003000000000000000"><font color="#0070E8">Sample<br> Output</font></a></h2> 
          <pre>
Case 1: maximum height = 40
</pre> 
          <pre>
Case 2: maximum height = 21
</pre> 
          <pre>
Case 3: maximum height = 28
</pre> 
          <pre>
Case 4: maximum height = 342
</pre> 
          <div></div> 
          <div></div> 
          <div>
            代码： 
          </div> 
          <div> 
           <div></div> 
           <div>
             #include&lt;iostream&gt; 
           </div> 
           <div>
             #include&lt;cstring&gt; 
           </div> 
           <div>
             #include&lt;algorithm&gt; 
           </div> 
           <div>
             #include&lt;fstream&gt; 
           </div> 
           <div>
             using namespace std; 
           </div> 
           <div>
             int num; 
           </div> 
           <div>
             typedef struct node{ 
           </div> 
           <div>
             int x,y,z; 
           </div> 
           <div>
             }node; 
           </div> 
           <div>
             node N[3000]; 
           </div> 
           <div>
             int d[3000]; 
           </div> 
           <div>
             int map[3000][3000]; 
           </div> 
           <div></div> 
           <div>
             void buildmap(){ 
           </div> 
           <div>
             for(int i=0;i&lt;num-1;i++){ 
           </div> 
           <div>
             for(int j=i+1;j&lt;num;j++){ 
           </div> 
           <div>
             if((N[i].x&gt;N[j].x&amp;&amp;N[i].y&gt;N[j].y)||(N[i].x&gt;N[j].y&amp;&amp;N[i].y&gt;N[j].x)){ 
           </div> 
           <div>
             map[i][j]=1; 
           </div> 
           <div>
             }else 
            <br> if((N[j].x&gt;N[i].x&amp;&amp;N[j].y&gt;N[i].y)||(N[j].x&gt;N[i].y&amp;&amp;N[j].y&gt;N[i].x)){ 
           </div> 
           <div>
             map[j][i]=1; 
           </div> 
           <div>
             } 
           </div> 
           <div>
             } 
           </div> 
           <div>
             } 
           </div> 
           <div>
             } 
           </div> 
           <div></div> 
           <div>
             int dp(int x){ 
           </div> 
           <div>
             int &amp;ans=d[x]; 
           </div> 
           <div>
             if(ans)return ans; 
           </div> 
           <div>
             ans=N[x].z; 
           </div> 
           <div>
             int tmp=ans; 
           </div> 
           <div>
             for(int i=0;i&lt;num;i++){ 
           </div> 
           <div>
             if(map[x][i])ans=max(ans,tmp+dp(i)); 
           </div> 
           <div>
             } 
           </div> 
           <div>
             return ans; 
           </div> 
           <div>
             } 
           </div> 
           <div></div> 
           <div>
             int main() 
           </div> 
           <div>
             { 
           </div> 
           <div>
             // freopen(“test.txt”,”r”,stdin); 
           </div> 
           <div>
             int n; 
           </div> 
           <div>
             int ncase=0; 
           </div> 
           <div>
             while(cin&gt;&gt;n&amp;&amp;n){ 
           </div> 
           <div>
             num=n*3; 
           </div> 
           <div>
             for(int i=0;i&lt;num;i+=3){ 
           </div> 
           <div>
             cin&gt;&gt;N[i].x&gt;&gt;N[i].y&gt;&gt;N[i].z; 
           </div> 
           <div>
             N[i+1].x=N[i].y; 
           </div> 
           <div>
             N[i+1].y=N[i].z; 
           </div> 
           <div>
             N[i+1].z=N[i].x; 
           </div> 
           <div>
             N[i+2].x=N[i+1].y; 
           </div> 
           <div>
             N[i+2].y=N[i+1].z; 
           </div> 
           <div>
             N[i+2].z=N[i+1].x; 
           </div> 
           <div>
             } 
           </div> 
           <div>
             memset(map,0,sizeof(map)); 
           </div> 
           <div>
             memset(d,0,sizeof(d)); 
           </div> 
           <div>
             buildmap(); 
           </div> 
           <div>
             int maxres=0; 
           </div> 
           <div>
             for(int i=0;i&lt;num;i++){ 
           </div> 
           <div>
             maxres=max(maxres,dp(i)); 
           </div> 
           <div>
             } 
           </div> 
           <div>
             ncase++; 
           </div> 
           <div>
             cout&lt;&lt;“Case 
            <br> “&lt;&lt;ncase&lt;&lt;“: 
            <br> maximum height = 
            <br> “&lt;&lt;maxres&lt;&lt;endl; 
           </div> 
           <div>
             } 
           </div> 
           <div>
             return 0; 
           </div> 
           <div>
             } 
           </div> 
          </div> 
          <div></div> 
         </div> 
        </div>
       </div>
       <!-- .entry-content --> 
       <!-- .entry-meta --> 
      </article>
      <!-- #post-149 --> 
      <!-- #comments --> 
     </div>
     <!-- #content --> 
    </div>
    <!-- #primary --> 
    <!-- #secondary .widget-area --> 
   </div>
   <!-- #main --> 
   <!-- #colophon --> 
  </div>
  <!-- #page -->   
  <!-- JiaThis Button BEGIN -->  
  <!-- JiaThis Button END -->   
 </body>
</html>