<!doctype html>
<!--[if IE 6]>
<html id="ie6" lang="zh-CN">
<![endif]-->
<!--[if IE 7]>
<html id="ie7" lang="zh-CN">
<![endif]-->
<!--[if IE 8]>
<html id="ie8" lang="zh-CN">
<![endif]-->
<!--[if !(IE 6) | !(IE 7) | !(IE 8)  ]><!-->
<html lang="zh-CN">
 <!--<![endif]-->
 <head>      
  <link rel="stylesheet" type="text/css" media="all" href="stylesheets/style.css">     
  <link rel="stylesheet" id="codebox-css" href="stylesheets/codebox.css" type="text/css" media="screen">             
 </head> 
 <body class="single single-post postid-98 single-format-standard content-sidebar"> 
  <div id="page" class="hfeed"> 
   <header id="branding" role="banner"> 
    <hgroup> 
     <h1 id="site-title"><span><a href="http://codelifeliwan.github.io/" title="Code_Life_LiWan" rel="home">Code_Life_LiWan</a></span></h1> 
     <h2 id="site-description">My heart will go on and on…</h2> 
    </hgroup>  
    <!-- #access --> 
   </header>
   <!-- #branding --> 
   <div id="main" class="clearfix"> 
    <div id="primary"> 
     <div id="content" role="main"> 
      <!-- #nav-single --> 
      <article id="post-98" class="post-98 post type-post status-publish format-standard hentry category-acm tag-reserved"> 
       <header class="entry-header"> 
        <h1 class="entry-title">[转载]STL中的优先队列</h1> 
        <div class="entry-meta"> 
         <span class="sep">Posted on </span>
         <a href="http://codelifeliwan.github.io/?p=98" title="下午 12:57" rel="bookmark"><time class="entry-date" datetime="2011-07-28T12:57:47+00:00" pubdate>28 七月, 2011</time></a>
         <span class="by-author"> <span class="sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://codelifeliwan.github.io/?author=1" title="View all posts by wanli" rel="author">wanli</a></span></span> 
         <span class="sep"> — </span> 
         <span class="comments-link"> <a href="http://codelifeliwan.github.io/?p=98#respond" title="Comment on [转载]STL中的优先队列">No Comments ↓</a> </span> 
        </div>
        <!-- .entry-meta --> 
       </header>
       <!-- .entry-header --> 
       <div class="entry-content">
        <div class="entry-content"> 
         <div class="blogzz_abstract borderc" style="padding-top:15px;margin:20px 0; border:none; border-top:1px dotted #ccc;"> 
          <div class="blogzz_ainfo" style="margin-bottom:12px;"> 
           <span style="margin-right:25px;"><strong>原文地址：</strong><a target="_blank" href="http://blog.sina.com.cn/s/blog_5357c0af0100iz45.html" title="STL中的优先队列">STL中的优先队列</a></span> 
           <span><strong>作者：</strong><a href="http://blog.sina.com.cn/u/1398259887" title="runner_y" target="_blank">runner_y</a></span> 
          </div> 
          <div class="blogzz_acon"> 
           <h1><img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" real_src="http://blog.csdn.net/images/authorship.gif" alt="原创" border="0" width="15" height="15" title="[转载]STL中的优先队列">&nbsp;<wbr> stl中的优先队列 <cite><a title="收藏到我的网摘中，并分享给我的朋友">收藏</a></cite></h1> 
           <p> STL中优先队列的使用，关键是提供恰当的比较方式供队列内部使用。对于默认类型，比较符的选择确定了该优先队列是最大还是最小优先队列，对于自定义的结构体，如果比较方式没有选择好，会出现编译通过，但在第二次插入时出现运行时错误的问题。</p> 
           <p>&nbsp;<wbr></p> 
           <p> 头文件&nbsp;<wbr>&lt;queue&gt;</p> 
           <p><strong><span lang="EN-US" xml:lang="EN-US">template &lt;</span></strong></p> 
           <p><strong><span lang="EN-US" xml:lang="EN-US"><span>&nbsp;<wbr>&nbsp;<wbr></span><br> class</span></strong> <span><span lang="EN-US" xml:lang="EN-US">Type</span></span><strong><span lang="EN-US" xml:lang="EN-US">,</span></strong></p> 
           <p><strong><span lang="EN-US" xml:lang="EN-US"><span>&nbsp;<wbr>&nbsp;<wbr></span><br> class</span></strong> <span><span lang="EN-US" xml:lang="EN-US">Container=</span></span><strong><span lang="EN-US" xml:lang="EN-US">vector</span></strong><span><span lang="EN-US" xml:lang="EN-US">&lt;Type&gt;,</span></span></p> 
           <p><span lang="EN-US" xml:lang="EN-US"><span>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr></span><br> <strong>class</strong> <span>Compare=</span><strong>less</strong><span>&lt;</span><strong>typename</strong><br> <span>Container</span><strong>::value_type</strong><span>&gt;</span></span></p> 
           <p><strong><span lang="EN-US" xml:lang="EN-US">&gt;</span></strong><span lang="EN-US" xml:lang="EN-US">&nbsp;<wbr></span></p> 
           <p><strong><span lang="EN-US" xml:lang="EN-US">class priority_queue</span></strong></p> 
           <p><span lang="EN-US" xml:lang="EN-US">&nbsp;<wbr></span></p> 
           <p><span lang="EN-US" xml:lang="EN-US">&nbsp;<wbr></span></p> 
           <p><em><span lang="EN-US" xml:lang="EN-US">Type</span></em></p> 
           <p><span lang="EN-US" xml:lang="EN-US">The<br> element data type to be stored in the priority_queue.</span></p> 
           <p><span><span lang="EN-US" xml:lang="EN-US">Container</span></span></p> 
           <p><span lang="EN-US" xml:lang="EN-US">The type<br> of the underlying container used to implement the<br> priority_queue.</span></p> 
           <p><em><span lang="EN-US" xml:lang="EN-US">Compare</span></em></p> 
           <p><span lang="EN-US" xml:lang="EN-US">The type<br> that provides a function object that can compare two element values<br> as sort keys to determine their relative order in the<br> priority_queue. This argument is optional and the binary predicate<br> <strong>less</strong><em>&lt;</em><strong>typename</strong><br> <em>Container</em><strong>::value_type</strong><em>&gt;</em><br> is the default value.</span></p> 
           <p><span>第二个参数我通常就用的</span><span lang="EN-US" xml:lang="EN-US">vector&lt;Type&gt;</span><span>，我其实也不太懂。</span></p> 
           <p> <span>第三个参数其实是指明内部比较所使用的符号。当是最大优先队列的时候，用</span><strong><span lang="EN-US" xml:lang="EN-US">less</span></strong><span lang="EN-US" xml:lang="EN-US">&lt;<strong>typename</strong><br> Container<strong>::value_type</strong>&gt;</span><span>（即用符号</span><span lang="EN-US" xml:lang="EN-US">&lt;</span><span>作比较），当是最小优先队列的时候，用</span><strong><span lang="EN-US" xml:lang="EN-US">greater</span></strong><span lang="EN-US" xml:lang="EN-US">&lt;<strong>typename</strong><br> Container<strong>::value_type</strong>&gt;</span><span>（即用符号</span><span lang="EN-US" xml:lang="EN-US">&gt;</span><span>作比较）。</span></p> 
           <p> <span>对于自定义的结构体，需要自己来写比较方法。有两种，一是重载操作符，二是比较类。</span></p> 
           <p></p> 
           <p><span>重载操作符</span></p> 
           <p>&nbsp;<wbr></p> 
           <div> 
            <div> 
             <div> 
              <span><a href="http://blog.csdn.net/logic_nut/archive/2009/07/26/4381233.aspx#">view<br> plain</a><a href="http://blog.csdn.net/logic_nut/archive/2009/07/26/4381233.aspx#">copy<br> to clipboard</a><a href="http://blog.csdn.net/logic_nut/archive/2009/07/26/4381233.aspx#">print</a><a href="http://blog.csdn.net/logic_nut/archive/2009/07/26/4381233.aspx#">?</a></span> 
             </div> 
            </div> 
            <ol start="1"> 
             <li><span><span>struct</span><span>&nbsp;<wbr>node&nbsp;<wbr>&nbsp;<wbr></span></span></li> 
             <li> <span>{&nbsp;<wbr>&nbsp;<wbr></span></li> 
             <li> <span>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr><span>int</span><span>&nbsp;</span><wbr>time,Q_num;&nbsp;<wbr>&nbsp;<wbr></span></li> 
             <li> <span>};&nbsp;<wbr>&nbsp;<wbr></span></li> 
             <li><span><span>bool</span><span>&nbsp;<wbr>operator&gt;(</span><span>const</span><span>&nbsp;<wbr>node&amp;&nbsp;<wbr>a,</span><span>const</span><span>&nbsp;<wbr>node&amp;&nbsp;<wbr>b)&nbsp;<wbr>&nbsp;<wbr></span></span></li> 
             <li> <span>{&nbsp;<wbr>&nbsp;<wbr></span></li> 
             <li> <span>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr><span>if</span><span>(a.time!=b.time)&nbsp;</span><wbr></span><span>return</span><span>&nbsp;<wbr>a.time&gt;b.time;&nbsp;<wbr>&nbsp;<wbr></span></li> 
             <li> <span>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr><span>else</span><span>&nbsp;</span><wbr></span><span>return</span><span>&nbsp;<wbr>a.Q_num&gt;b.Q_num;&nbsp;<wbr>&nbsp;<wbr></span></li> 
             <li> <span>}&nbsp;<wbr>&nbsp;<wbr></span></li> 
             <li> <span>priority_queue&lt;node,vector&lt;node&gt;,greater&lt;vector&lt;node&gt;::value_type&gt;&gt;&nbsp;<wbr>task;&nbsp;<wbr>&nbsp;<wbr></span></li> 
            </ol> 
           </div> 
           <p><textarea style="display: none;" cols="50" rows="15" name="code">&lt;br /&gt;
struct node&lt;br /&gt;
{&lt;br /&gt;
        int time,Q_num;&lt;br /&gt;
};&lt;br /&gt;
bool operator&gt;(const node&amp; a,const node&amp; b)&lt;br /&gt;
{&lt;br /&gt;
        if(a.time!=b.time) return a.time&gt;b.time;&lt;br /&gt;
        else return a.Q_num&gt;b.Q_num;&lt;br /&gt;
}&lt;br /&gt;
priority_queue&lt;node,vector&lt;node&gt;,greater&lt;vector&lt;node&gt;::value_type&gt;&gt; task;&lt;br /&gt;
</textarea><br> &nbsp;<wbr><br> </p> 
           <p>&nbsp;<wbr></p> 
           <p>&nbsp;<wbr></p> 
           <p><span>比较类</span></p> 
           <p>&nbsp;<wbr></p> 
           <div> 
            <div> 
             <div> 
              <span><a href="http://blog.csdn.net/logic_nut/archive/2009/07/26/4381233.aspx#">view<br> plain</a><a href="http://blog.csdn.net/logic_nut/archive/2009/07/26/4381233.aspx#">copy<br> to clipboard</a><a href="http://blog.csdn.net/logic_nut/archive/2009/07/26/4381233.aspx#">print</a><a href="http://blog.csdn.net/logic_nut/archive/2009/07/26/4381233.aspx#">?</a></span> 
             </div> 
            </div> 
            <ol start="1"> 
             <li><span><span>struct</span><span>&nbsp;<wbr>node&nbsp;<wbr>&nbsp;<wbr></span></span></li> 
             <li> <span>{&nbsp;<wbr>&nbsp;<wbr></span></li> 
             <li> <span>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr><span>int</span><span>&nbsp;</span><wbr>time,Q_num;&nbsp;<wbr>&nbsp;<wbr></span></li> 
             <li> <span>};&nbsp;<wbr>&nbsp;<wbr></span></li> 
             <li><span><span>struct</span><span>&nbsp;<wbr>cmp&nbsp;<wbr>&nbsp;<wbr></span></span></li> 
             <li> <span>{&nbsp;<wbr>&nbsp;<wbr></span></li> 
             <li> <span>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr><span>bool</span><span>&nbsp;</span><wbr>operator()(</span><span>const</span><span>&nbsp;<wbr>node&amp;&nbsp;<wbr>a,</span><span>const</span><span>&nbsp;<wbr>node&amp;&nbsp;<wbr>b)&nbsp;<wbr>&nbsp;<wbr></span></li> 
             <li> <span>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>{&nbsp;<wbr>&nbsp;<wbr></span></li> 
             <li> <span>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr><span>if</span><span>(a.time!=b.time)&nbsp;</span><wbr></span><span>return</span><span>&nbsp;<wbr>a.time&gt;b.time;&nbsp;<wbr>&nbsp;<wbr></span></li> 
             <li> <span>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr><span>else</span><span>&nbsp;</span><wbr></span><span>return</span><span>&nbsp;<wbr>a.Q_num&gt;b.Q_num;&nbsp;<wbr>&nbsp;<wbr></span></li> 
             <li> <span>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>}&nbsp;<wbr>&nbsp;<wbr></span></li> 
             <li> <span>};&nbsp;<wbr>&nbsp;<wbr></span></li> 
             <li> <span>priority_queue&lt;node,vector&lt;node&gt;,cmp&gt;&nbsp;<wbr>task;&nbsp;<wbr><br> </span></li> 
            </ol> 
            <p> ———————————————————————–</p> 
            <p> //STL中默认的是最大优先队列，声明时只要<br> priority_queue&lt;int&gt;q就行了<br> //如果是最小堆，麻烦一些priority_queue&lt;int,vector&lt;int&gt;,cmp&gt;<br> q;当然也可以重载运算&lt;<br> //看个例子</p> 
            <p>#include&lt;cstdio&gt;<br> #include&lt;iostream&gt;<br> #include&lt;algorithm&gt;<br> #include&lt;queue&gt;<br> #include&lt;functional&gt;<br> using namespace std;<br> #define M 100005<br> int n,m;<br> int v[M];<br> struct cmp{<br> bool operator ()(const int &amp;i,const int<br> &amp;j){<br> return i&gt;j;<br> }<br> };<br> int main()<br> {<br> &nbsp;<wbr>&nbsp;<wbr><br> priority_queue&lt;int&gt;que;<br> &nbsp;<wbr>&nbsp;<wbr><br> priority_queue&lt;int,vector&lt;int&gt;,cmp&gt;<br> que1;<br> srand((unsigned) (time)(NULL));<br> for(int i = 1; i &lt;= 20; i++)<br> {<br> int key = rand()%100;<br> que.push(key);<br> que1.push(key);<br> }<br> while(!que.empty() &amp;&amp;<br> !que1.empty())<br> {<br> int m = que.top();<br> int mm = que1.top();<br> cout&lt;&lt;m&lt;&lt;“t”&lt;&lt;mm&lt;&lt;endl;</p> 
            <p>que.pop();<br> que1.pop();<br> }<br> cout&lt;&lt;endl;</p> 
            <p>return EXIT_SUCCESS;<br> }</p> 
            <p>转载自：http://blog.csdn.net/logic_nut/archive/2009/07/26/4381233.aspx</p> 
            <p>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr><br> http://hi.baidu.com/motioo/blog/item/217ec0253763a36334a80fb3<wbr>.html<br> </p> 
           </div> 
           <p><textarea style="display: none;" cols="50" rows="15" name="code">&lt;br /&gt;
struct node&lt;br /&gt;
{&lt;br /&gt;
        int time,Q_num;&lt;br /&gt;
};&lt;br /&gt;
struct cmp&lt;br /&gt;
{&lt;br /&gt;
        bool operator()(const node&amp; a,const node&amp; b)&lt;br /&gt;
        {&lt;br /&gt;
                if(a.time!=b.time) return a.time&gt;b.time;&lt;br /&gt;
                else return a.Q_num&gt;b.Q_num;&lt;br /&gt;
        }&lt;br /&gt;
};&lt;br /&gt;
priority_queue&lt;node,vector&lt;node&gt;,cmp&gt; task;&nbsp;&lt;wbr&gt;&nbsp;&lt;wbr&gt;&lt;br /&gt;
</textarea></p> 
           <p>&nbsp;<wbr></p> 
           <p><span><br></span></p> 
          </div> 
         </div> 
        </div>
       </div>
       <!-- .entry-content --> 
       <!-- .entry-meta --> 
      </article>
      <!-- #post-98 --> 
      <!-- #comments --> 
     </div>
     <!-- #content --> 
    </div>
    <!-- #primary --> 
    <!-- #secondary .widget-area --> 
   </div>
   <!-- #main --> 
   <!-- #colophon --> 
  </div>
  <!-- #page -->   
  <!-- JiaThis Button BEGIN -->  
  <!-- JiaThis Button END -->   
 </body>
</html>