<!doctype html>
<!--[if IE 6]>
<html id="ie6" lang="zh-CN">
<![endif]-->
<!--[if IE 7]>
<html id="ie7" lang="zh-CN">
<![endif]-->
<!--[if IE 8]>
<html id="ie8" lang="zh-CN">
<![endif]-->
<!--[if !(IE 6) | !(IE 7) | !(IE 8)  ]><!-->
<html lang="zh-CN">
 <!--<![endif]-->
 <head>      
  <link rel="stylesheet" type="text/css" media="all" href="stylesheets/style.css">     
  <link rel="stylesheet" id="codebox-css" href="stylesheets/codebox.css" type="text/css" media="screen">             
 </head> 
 <body class="single single-post postid-238 single-format-standard content-sidebar"> 
  <div id="page" class="hfeed"> 
   <header id="branding" role="banner"> 
    <hgroup> 
     <h1 id="site-title"><span><a href="http://codelifeliwan.github.io/" title="Code_Life_LiWan" rel="home">Code_Life_LiWan</a></span></h1> 
     <h2 id="site-description">My heart will go on and on…</h2> 
    </hgroup>  
    <!-- #access --> 
   </header>
   <!-- #branding --> 
   <div id="main" class="clearfix"> 
    <div id="primary"> 
     <div id="content" role="main"> 
      <!-- #nav-single --> 
      <article id="post-238" class="post-238 post type-post status-publish format-standard hentry category-my_operating_system tag-operating_system"> 
       <header class="entry-header"> 
        <h1 class="entry-title">操作系统–80X86中断系统</h1> 
        <div class="entry-meta"> 
         <span class="sep">Posted on </span>
         <a href="http://codelifeliwan.github.io/?p=238" title="下午 10:16" rel="bookmark"><time class="entry-date" datetime="2012-05-04T22:16:54+00:00" pubdate>4 五月, 2012</time></a>
         <span class="by-author"> <span class="sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://codelifeliwan.github.io/?author=1" title="View all posts by wanli" rel="author">wanli</a></span></span> 
         <span class="sep"> — </span> 
         <span class="comments-link"> <a href="http://codelifeliwan.github.io/?p=238#respond" title="Comment on 操作系统–80X86中断系统">No Comments ↓</a> </span> 
        </div>
        <!-- .entry-meta --> 
       </header>
       <!-- .entry-header --> 
       <div class="entry-content">
        <div class="entry-content"> 
         <h1 style="TexT-ALiGn: center" align="center"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 操作系统</span><span lang="EN-US" xml:lang="EN-US">–80X86</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">中断系统</span><span lang="EN-US" xml:lang="EN-US"><br> </span></h1> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 开篇依旧是我经典而又无力的吐槽，技术篇可以直接跳过。</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span lang="EN-US" xml:lang="EN-US">/////////////////////////////////////////////////</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">万恶的分割线</span><span lang="EN-US" xml:lang="EN-US">///////////////////////////////////////////////////////////////</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 首先非常高兴能够发表这篇博文，因为我自己的电脑昨天把虚拟机里面的</span><span lang="EN-US" xml:lang="EN-US">XP</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">配置了一下竟然能上学校的网了，以前记得也这样配置过，不过后来学校的网络不知道怎么搞的不能用了，昨天配置了下竟然又能用了，不得不说这对</span><span lang="EN-US" xml:lang="EN-US">Linux</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">用户来说终于看到了上网的希望了。当然了，最近还是比较衰的，操作系统的进展并不是很快。卡在了一个问题上想进也进不了了，这两天有网用了还比较不错，没网用的时候几乎连资料都不能查。自己没网，也只能去别人那蹭网，所以只能一个宿舍一个宿舍的找看谁的电脑开着没用，就飞快打开浏览器上个邮箱，看看发出的问题有没有回邮件的，俗话说广撒网多捞鱼，而我撒的网挺多，捞的鱼却寥寥无几。最讨厌的也就是打开邮箱，上面写着“没有未读邮件”，偶尔就是中山大学的赵炯博士回个邮件，也是几乎说不到点子上。当然用别人的网也不是那么顺利的，因为几乎每个宿舍都有那种“游戏人生”的人存在，他们几乎都是用联通的网，联通的网分到宿舍玩大型游戏也是经常卡，所以，去用别人的网一般是不给用的，有时候可能连邮箱还没打开就各种挨骂、挨说，然后被撵走。然后换地方看看结果还是没有未读邮件。当然这几个星期心情也不是很好。我觉得在三个星期调不出来一个错误，还不知道错误在哪的还要经常挨骂，求助各路帮助都无援的情况下心情还能好起来的人不是傻子就是呆子，我也自认做不到。我也已经厚颜无耻的给赵炯博士发了好几封邮件，今天问到一个很关键的问题，然后中午满怀期待的打开邮箱的时候再看到那个没有未读邮件的时候我觉得我的世界由黑白的变成全黑的了。还好熊晓芸老师那天说了，最后做不出来成品也没关系，能发表篇论文就</span><span lang="EN-US" xml:lang="EN-US">OK</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">了，唉，总算感觉还不是那么绝望。我昨天又跟王金龙老师说不搞</span><span lang="EN-US" xml:lang="EN-US">ACM</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">了，准备自己创业，又被王老师给说了一顿，不过王老师还是很给力的，总是能指点下方向什么的。也记得两个星期前给雨林木风（我自己认为是一家很有活力的公司）发了封邮件，人家说这孩子不错，结果又因为电话早已经停机没有联系方式而不了了之。总之，一个字：衰！</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 写完这些，我不禁抬起头</span><span lang="EN-US" xml:lang="EN-US">45</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">度角仰望天空，看见天空上面大大的“衰”字，流露出一股淡淡的忧伤，继续下面的正文。</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span lang="EN-US" xml:lang="EN-US">///////////////////////////////////////////////////////</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">万恶的分割线</span><span lang="EN-US" xml:lang="EN-US">//////////////////////////////////////////////////////////</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span lang="EN-US" xml:lang="EN-US">&nbsp;<wbr></span></p> 
         <h2><span style="FonT-FAMiLY: 黑体; mso-ascii-font-family: Arial; mso-hansi-font-family: Arial"><br> 正文：</span></h2> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 关于</span><span lang="EN-US" xml:lang="EN-US">80X86</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">的中断系统，其实很早以前就学完了，至于为什么现在才写，也就是一直感觉这个东西挺乱的，前几天熊晓芸老师说我写的博文不“内个”，所以以后决定写“内个”点，尽量做到深入浅出吧，一般问题会给出具体实例的，关于中断的概念，我就不班门弄斧了，应该都知道吧，<span style="CoLor: red">具体的关于单片机和其他的通用的中断可以参考：<a href="http://blog.sina.com.cn/s/blog_6730a3aa010107y9.html">http://blog.sina.com.cn/s/blog_6730a3aa010107y9.html</a>。</span></span></p> 
         <h3><span lang="EN-US" xml:lang="EN-US">1</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">、实模式下的中断系统</span></h3> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 我们知道计算机开机进入的实模式，说白了就是最原始的</span><span lang="EN-US" xml:lang="EN-US">8086</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">模式，只能寻址</span><span lang="EN-US" xml:lang="EN-US">1MB</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">的内存空间。然而麻雀虽小五脏俱全。这</span><span lang="EN-US" xml:lang="EN-US">1MB</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">里面可是什么都有，其中很重要的一个就是中断，只能这样说，如果没有中断的话，我们的计算机现在还是传说中的“单道批处理系统”，无法实行各种各样的进程控制等。</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 当开机启动的时候由</span><span lang="EN-US" xml:lang="EN-US">BIOS</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">自动设置内存的</span><span lang="EN-US" xml:lang="EN-US">0x00000~0x003ff</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">（最前的</span><span lang="EN-US" xml:lang="EN-US">1KB</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">）处为中断向量表区。而</span><span lang="EN-US" xml:lang="EN-US">0xc0000~0xfffff</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">处为中断程序处理区。可能你不知道我说的中断向量什么的是什么意思，别急，下面慢慢解释。</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 当我们手动调用中断的时候比如：</span><span lang="EN-US" xml:lang="EN-US">int<br> 0x01</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">也就是调用</span><span lang="EN-US" xml:lang="EN-US">1</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">号中断，那么计算机是得找到</span><span lang="EN-US" xml:lang="EN-US">1</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">号中断处理程序的入口点，在实模式下，中断程序入口由两个寄存器来控制：</span><span lang="EN-US" xml:lang="EN-US">CS</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">寄存器是代码段寄存器，存储的是代码段首地址，是</span><span lang="EN-US" xml:lang="EN-US">16</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">位寄存器，由于</span><span lang="EN-US" xml:lang="EN-US">1MB</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">的内存地址是</span><span lang="EN-US" xml:lang="EN-US">20</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">位地址，那么代码段寄存器</span><span lang="EN-US" xml:lang="EN-US">CS</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">的</span><span lang="EN-US" xml:lang="EN-US">16</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">位存储的是高</span><span lang="EN-US" xml:lang="EN-US">16</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">位，也就是说代码段首地址默认低</span><span lang="EN-US" xml:lang="EN-US">4</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">位是</span><span lang="EN-US" xml:lang="EN-US">0</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">，也就是说比如</span><span lang="EN-US" xml:lang="EN-US">CS</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">寄存器值为</span><span lang="EN-US" xml:lang="EN-US">0x1111</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">，那么代码段首地址为</span><span lang="EN-US" xml:lang="EN-US">0x11110</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">。还有一个就是指令指针寄存器</span><span lang="EN-US" xml:lang="EN-US">IP</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">，存储的是下一条要执行指令的地址，在实模式下，</span><span lang="EN-US" xml:lang="EN-US">IP</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">也是</span><span lang="EN-US" xml:lang="EN-US">16</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">位的，存储的是地址的低</span><span lang="EN-US" xml:lang="EN-US">16</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">位。一般也叫做偏移量，例如：</span></p> 
         <p style="TexT-ALiGn: center" align="center"> <span lang="EN-US" xml:lang="EN-US">0x1111:0x1000</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 那么这里的</span><span lang="EN-US" xml:lang="EN-US">0x1111</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">就是</span><span lang="EN-US" xml:lang="EN-US">CS</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">寄存器的值，</span><span lang="EN-US" xml:lang="EN-US">0x1000</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">就是</span><span lang="EN-US" xml:lang="EN-US">IP</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">的值，意思就是执行绝对内存地址为</span><span lang="EN-US" xml:lang="EN-US">0x11110+0x1000=0x12110</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">处的代码。</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 那么上面所说的中断向量表区</span><span lang="EN-US" xml:lang="EN-US">0x00000~0x003ff</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">（最前的</span><span lang="EN-US" xml:lang="EN-US">1KB</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">）就是存储这样的</span><span lang="EN-US" xml:lang="EN-US">CS</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">和</span><span lang="EN-US" xml:lang="EN-US">IP</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">的值的区域，应该说每一个中断对应</span><span lang="EN-US" xml:lang="EN-US">4</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">字节，其中高</span><span lang="EN-US" xml:lang="EN-US">2</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">字节存储</span><span lang="EN-US" xml:lang="EN-US">CS</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">段基址，低</span><span lang="EN-US" xml:lang="EN-US">2</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">字节存储</span><span lang="EN-US" xml:lang="EN-US">IP</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">偏移量。真正的中断处理程序是在</span><span lang="EN-US" xml:lang="EN-US">0xc0000~0xfffff</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">处中断处理程序区。也就是说中断向量表区中的数据指向中断处理程序区，在调用中断时，是通过寻找中断向量表区中的数据来执行中断处理程序区的代码（不知道这样说合不合理）。举例来说如果调用</span><span lang="EN-US" xml:lang="EN-US">int 0x01</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">中断那么：</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span lang="EN-US" xml:lang="EN-US">1</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">、由硬件自动往堆栈中压入原来的</span><span lang="EN-US" xml:lang="EN-US">CS</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">和</span><span lang="EN-US" xml:lang="EN-US">IP</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">。</span></p> 
         <p style="MArGin-LeFT: 21pt; mso-para-margin-left: 2.0gd"><span lang="EN-US" xml:lang="EN-US">2</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">、处理器会自动计算</span><span lang="EN-US" xml:lang="EN-US">1</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">号中断在中断向量表区的位置，也就是：</span></p> 
         <p style="TexT-ALiGn: center" align="center"> <span lang="EN-US" xml:lang="EN-US">1*4=4</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">（乘以</span><span lang="EN-US" xml:lang="EN-US">4</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">是因为每个</span><span lang="EN-US" xml:lang="EN-US">4</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">字节）</span></p> 
         <p style="MArGin-LeFT: 21pt; mso-para-margin-left: 2.0gd"><span lang="EN-US" xml:lang="EN-US">3</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">、那么这里计算出来的</span><span lang="EN-US" xml:lang="EN-US">4~5</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">字节就是</span><span lang="EN-US" xml:lang="EN-US">CS</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">值，自动装入</span><span lang="EN-US" xml:lang="EN-US">CS</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">寄存器。</span></p> 
         <p style="MArGin-LeFT: 21pt; mso-para-margin-left: 2.0gd"><span lang="EN-US" xml:lang="EN-US">4</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">、这里第</span><span lang="EN-US" xml:lang="EN-US">5</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">字节后的两字节</span><span lang="EN-US" xml:lang="EN-US">6~7</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">字节是</span><span lang="EN-US" xml:lang="EN-US">IP</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">值，自动装入</span><span lang="EN-US" xml:lang="EN-US">IP</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">寄存器。</span></p> 
         <p style="MArGin-LeFT: 21pt; mso-para-margin-left: 2.0gd"><span lang="EN-US" xml:lang="EN-US">5</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">、当</span><span lang="EN-US" xml:lang="EN-US">CS</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">和</span><span lang="EN-US" xml:lang="EN-US">IP</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">自动装入完成后就可以执行</span><span lang="EN-US" xml:lang="EN-US">CS:IP</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">处的程序了（这里也就是中断服务程序）。</span></p> 
         <p style="MArGin-LeFT: 21pt; mso-para-margin-left: 2.0gd"><span lang="EN-US" xml:lang="EN-US">6</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">、中断服务程序执行完成后从堆栈中还原原来的</span><span lang="EN-US" xml:lang="EN-US">CS</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">和</span><span lang="EN-US" xml:lang="EN-US">IP</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">，继续运行原来程序。</span></p> 
         <h3><span lang="EN-US" xml:lang="EN-US">2</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">、保护模式下的中断系统</span></h3> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 与实模式相比，保护模式下的中断系统就显得更加复杂，这里的复杂指的是细节复杂了，但是整体还是没变，也就是说和上面一样，要想执行中断以下几个是必不可少的：</span></p> 
         <p style="TexT-inDenT: 21pt; MArGin-LeFT: 0cm; mso-char-indent-count: 2.0; mso-list: l0 level1 lfo1"><span style="mso-fareast-font-family: 'Times new roman'" lang="EN-US" xml:lang="EN-US"><span style="mso-list: ignore">1、</span></span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">中断向量表的入口地址。</span></p> 
         <p style="TexT-inDenT: 21pt; MArGin-LeFT: 0cm; mso-char-indent-count: 2.0; mso-list: l0 level1 lfo1"><span style="mso-fareast-font-family: 'Times new roman'" lang="EN-US" xml:lang="EN-US"><span style="mso-list: ignore">2、</span></span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">中断向量表。</span></p> 
         <p style="TexT-inDenT: 21pt; MArGin-LeFT: 0cm; mso-char-indent-count: 2.0; mso-list: l0 level1 lfo1"><span style="mso-fareast-font-family: 'Times new roman'" lang="EN-US" xml:lang="EN-US"><span style="mso-list: ignore">3、</span></span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">中断服务程序。</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 和上面相比，这里多了一个中断向量表的入口地址。其实细想还是没变，上面的中断向量表入口地址默认的是绝对内存</span><span lang="EN-US" xml:lang="EN-US">0</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">处。而这里是可以自己自由定义的。也就是说在保护模式下，中断向量表在内存中的地址是随意的，我只要记住中断向量表的入口地址即可，由中断向量表里面的数据来定位中断服务程序。</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 在这里，首先说下概念：在保护模式下我们一般不叫中断向量表，而是称为中断描述符表（英文缩写：</span><span lang="EN-US" xml:lang="EN-US">IDT</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">：</span><span lang="EN-US" xml:lang="EN-US">Interrupt Descriptor Table</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">），而表里面的每一个元素我们称为中断描述符不知道您记不记得以前说全局描述符的时候，其实是一样的。</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 而我们要记住的这个入口地址存储在一个称为中断描述符表寄存器的</span><span lang="EN-US" xml:lang="EN-US">48</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">位寄存器中（以后称为：</span><span lang="EN-US" xml:lang="EN-US">IDTR</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">），为什么是</span><span lang="EN-US" xml:lang="EN-US">48</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">位呢？我们</span><span lang="EN-US" xml:lang="EN-US">32</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">位的保护模式下地址是</span><span lang="EN-US" xml:lang="EN-US">32</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">位的，那么只需要</span><span lang="EN-US" xml:lang="EN-US">32</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">位来记录地址不就</span><span lang="EN-US" xml:lang="EN-US">OK</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">了吗？不错，其实</span><span lang="EN-US" xml:lang="EN-US">IDTR</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">的高</span><span lang="EN-US" xml:lang="EN-US">32</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">位是用来存储入口地址的，而低</span><span lang="EN-US" xml:lang="EN-US">16</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">位是用来存储这个</span><span lang="EN-US" xml:lang="EN-US">IDT</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">的长度的（也就是界限，以字节为单位）。如下：</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span lang="EN-US" xml:lang="EN-US">&nbsp;<wbr><a href="http://photo.blog.sina.com.cn/showpic.html#blogid=6730a3aa01011ztd&amp;url=http://s3.sinaimg.cn/orignal/6730a3aahbf36a150e7e2" target="_blank"><img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" real_src="http://s3.sinaimg.cn/middle/6730a3aahbf36a150e7e2&amp;690" width="409" height="121" alt="操作系统--80X86中断系统" title="操作系统--80X86中断系统"></a></span></p> 
         <p></p> 
         <p style="TexT-ALiGn: center" align="center"> <span lang="EN-US" xml:lang="EN-US"><br> </span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 比如我如果定义下面的一个数据结构：</span></p> 
         <p style="TexT-inDenT: 21pt; MArGin-LeFT: 147pt"> <span lang="EN-US" xml:lang="EN-US">_idt:</span></p> 
         <p style="TexT-ALiGn: center" align="center"> <span lang="EN-US" xml:lang="EN-US"><span style="mso-tab-count: 1">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr></span><br> dw<span style="mso-tab-count: 1">&nbsp;<wbr>&nbsp;<wbr></span><br> 0x0800</span></p> 
         <p style="TexT-ALiGn: center" align="center"> <span lang="EN-US" xml:lang="EN-US"><span style="mso-tab-count: 1">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr></span><br> dw<span style="mso-tab-count: 1">&nbsp;<wbr>&nbsp;<wbr></span><br> 0x2000</span></p> 
         <p style="TexT-ALiGn: center" align="center"> <span lang="EN-US" xml:lang="EN-US"><span style="mso-tab-count: 1">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr></span><br> dw<span style="mso-tab-count: 1">&nbsp;<wbr>&nbsp;<wbr></span><br> 0x0000</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 这里面高</span><span lang="EN-US" xml:lang="EN-US">32</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">位为</span><span lang="EN-US" xml:lang="EN-US">0x00002000</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">，低</span><span lang="EN-US" xml:lang="EN-US">16</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">位为</span><span lang="EN-US" xml:lang="EN-US">0x0800</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">，那么如果我将这个存储到</span><span lang="EN-US" xml:lang="EN-US">IDTR</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">中就代表</span><span lang="EN-US" xml:lang="EN-US">IDT</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">是从</span><span lang="EN-US" xml:lang="EN-US">0x00002000</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">处开始，长度为</span><span lang="EN-US" xml:lang="EN-US">0x0800</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">字节。</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 那么如何装入</span><span lang="EN-US" xml:lang="EN-US">IDTR</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">中呢？可以使用</span><span lang="EN-US" xml:lang="EN-US">lidt</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">指令：</span></p> 
         <p style="TexT-ALiGn: center" align="center"> <span lang="EN-US" xml:lang="EN-US">lidt<span style="mso-spacerun: yes">&nbsp;<wbr>&nbsp;<wbr></span><br> [_idt]</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 这样就把以上数据装入</span><span lang="EN-US" xml:lang="EN-US">IDTR</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">中了！</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 上面在实模式的时候我们说到，每一项占</span><span lang="EN-US" xml:lang="EN-US">4</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">字节，高</span><span lang="EN-US" xml:lang="EN-US">2</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">字节存</span><span lang="EN-US" xml:lang="EN-US">CS</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">，低</span><span lang="EN-US" xml:lang="EN-US">2</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">字节存</span><span lang="EN-US" xml:lang="EN-US">IP</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">，而在保护模式下，每一个中断描述符占</span><span lang="EN-US" xml:lang="EN-US">8</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">字节，共</span><span lang="EN-US" xml:lang="EN-US">64</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">位，这也不难理解了，上面的长度为</span><span lang="EN-US" xml:lang="EN-US">0x0800</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">就是</span><span lang="EN-US" xml:lang="EN-US">0x0800/8=0x0100</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">个描述符，也就是最多只有</span><span lang="EN-US" xml:lang="EN-US">256</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">个描述符，也就是</span><span lang="EN-US" xml:lang="EN-US">256</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">个中断。</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 具体的中断描述符的格式如下：</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span lang="EN-US" xml:lang="EN-US"><a href="http://photo.blog.sina.com.cn/showpic.html#blogid=6730a3aa01011ztd&amp;url=http://s6.sinaimg.cn/orignal/6730a3aahbf36a45a7a75" target="_blank"><img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" real_src="http://s6.sinaimg.cn/middle/6730a3aahbf36a45a7a75&amp;690" width="565" height="312" name="image_operate_3481336141331282" alt="操作系统--80X86中断系统" title="操作系统--80X86中断系统"></a></span></p> 
         <p></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0">&nbsp;<wbr></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 其中，</span><span lang="EN-US" xml:lang="EN-US">byte0~byte1</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">和</span><span lang="EN-US" xml:lang="EN-US">byte6~byte7</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">为中断服务程序在段中的偏移地址，相当于实模式下中断向量表中的</span><span lang="EN-US" xml:lang="EN-US">IP</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">，而</span><span lang="EN-US" xml:lang="EN-US">byte2~byte3</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">为代码段选择子。<span style="CoLor: red">有关代码段选择子请看：<a href="http://blog.sina.com.cn/s/blog_6730a3aa01010liv.html"><font color="#000000">http://blog.sina.com.cn/s/blog_6730a3aa01010liv.html</font></a></span>这里重点说</span><span lang="EN-US" xml:lang="EN-US">byte4~byte5</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">。</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span lang="EN-US" xml:lang="EN-US">P</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">位：</span><span lang="EN-US" xml:lang="EN-US">P</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">位称为存在位，可以这样理解：</span><span lang="EN-US" xml:lang="EN-US">P=1</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">表示此描述符有效，</span><span lang="EN-US" xml:lang="EN-US">P=0</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">表示此描述符无效。</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span lang="EN-US" xml:lang="EN-US">DPL</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">：特权级，一共有三个特权级分别为</span><span lang="EN-US" xml:lang="EN-US">0</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">、</span><span lang="EN-US" xml:lang="EN-US">1</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">、</span><span lang="EN-US" xml:lang="EN-US">2</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">、</span><span lang="EN-US" xml:lang="EN-US">3</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">，</span><span lang="EN-US" xml:lang="EN-US">0</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">为系统级，</span><span lang="EN-US" xml:lang="EN-US">3</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">为用户级，</span><span lang="EN-US" xml:lang="EN-US">2</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">和</span><span lang="EN-US" xml:lang="EN-US">1</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">为系统服务级，在</span><span lang="EN-US" xml:lang="EN-US">Windows</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">和</span><span lang="EN-US" xml:lang="EN-US">Linux</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">操作系统中都只使用了</span><span lang="EN-US" xml:lang="EN-US">0</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">和</span><span lang="EN-US" xml:lang="EN-US">3</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">特权级。它指示了什么特权级可以访问，例如如果</span><span lang="EN-US" xml:lang="EN-US">DPL=0</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">那么用户级特权级（为</span><span lang="EN-US" xml:lang="EN-US">3</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">）就不能访问。</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span lang="EN-US" xml:lang="EN-US">DT</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">位：</span><span lang="EN-US" xml:lang="EN-US">DT</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">位称为描述符种类位，描述了此描述符的类型，</span><span lang="EN-US" xml:lang="EN-US">DT=1</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">为系统段描述符，</span><span lang="EN-US" xml:lang="EN-US">DT=0</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">为门描述符（在下面会说到）。这里先把</span><span lang="EN-US" xml:lang="EN-US">DT</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">置为</span><span lang="EN-US" xml:lang="EN-US">0</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">。</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span lang="EN-US" xml:lang="EN-US">Type</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">：</span><span lang="EN-US" xml:lang="EN-US">Type</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">为类型域，其编码极其表示类型如下：</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span lang="EN-US" xml:lang="EN-US"><a href="http://photo.blog.sina.com.cn/showpic.html#blogid=6730a3aa01011ztd&amp;url=http://s3.sinaimg.cn/orignal/6730a3aahbf36a611b242" target="_blank"><img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" real_src="http://s3.sinaimg.cn/middle/6730a3aahbf36a611b242&amp;690" name="image_operate_31951336141344762" alt="操作系统--80X86中断系统" title="操作系统--80X86中断系统"></a></span></p> 
         <p></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0">&nbsp;<wbr></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 从这里又看见了很多不认识的东西，没关系，慢慢解释。</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span lang="EN-US" xml:lang="EN-US">80X86</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">的中断可分为两种，一种称为内部中断，还有一种称为外部中断。</span></p> 
         <h3><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 外部中断：</span></h3> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 可以这样理解，外部中断一般是通过硬件来产生的中断，比如键盘、时钟中断等检测到外部事件产生的。而外部中断又可以分为可屏蔽中断和非屏蔽中断。可屏蔽中断可以使用</span><span lang="EN-US" xml:lang="EN-US">CLI</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">指令来关闭中断，使用</span><span lang="EN-US" xml:lang="EN-US">STI</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">指令开启中断。具体在前面的博文已经说明，这里不再细说。</span></p> 
         <h3><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 内部中断：</span></h3> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 内部中断又叫做“异常”，是由程序不正常运行或非法条件等引起的。例如除法中除数为</span><span lang="EN-US" xml:lang="EN-US">0</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">产生的异常等。当然，我们也可以手动调用这些异常处理程序，使用</span><span lang="EN-US" xml:lang="EN-US">int n</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">来调用，这个一般也称为异常。</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 对于异常又分为三种：故障、陷阱和终止。</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 故障是在会引起异常的程序或者指令执行前，处理器预测到会产生异常而通知操作系统的一种异常。也就是说，它本身是一种异常，而这种异常的产生是因为处理器预知以后会产生异常而产生的。故障是可以排除的。</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 陷阱和故障相对应是在异常程序运行后产生的异常。</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 终止是指在系统出现严重情况的时候产生的异常。这种异常可能会导致系统不能正确运行或者死机等等。</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 由于在</span><span lang="EN-US" xml:lang="EN-US">Linux</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">中对这三种异常不加区分，那么我们在此也不加区分。</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 门：门将是以后贯穿始终且无比恶心的一个概念，我自己目前也是卡在了一个门上过不去了。可以在上面看到各种各样的门，那么在这里，我们以</span><span lang="EN-US" xml:lang="EN-US">80386</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">为例。只说中断。相关的有</span><span lang="EN-US" xml:lang="EN-US">386</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">中断门和</span><span lang="EN-US" xml:lang="EN-US">386</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">陷阱门，也就是说我们在中断系统里面，只要将</span><span lang="EN-US" xml:lang="EN-US">Type</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">设置为</span><span lang="EN-US" xml:lang="EN-US">E</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">或者</span><span lang="EN-US" xml:lang="EN-US">F</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">就可以了。这里不妨用代码说话（参考</span><span lang="EN-US" xml:lang="EN-US">Linux</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">）：</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0">&nbsp;<wbr></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0">&nbsp;<wbr></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span lang="EN-US" xml:lang="EN-US">#define INT_ADDR<br> 0x00002000</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0">&nbsp;<wbr></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span lang="EN-US" xml:lang="EN-US">#define<br> INT_ADDR_I(n) INT_ADDR+8*(n)</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0">&nbsp;<wbr></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span lang="EN-US" xml:lang="EN-US">#define<br> _set_gate(gate_addr,attr,addr) </span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes">&nbsp;<wbr></span> (*((unsigned int<br> *)(gate_addr)))=(0x00080000|((addr)&amp;0x0000ffff));<span style="mso-tab-count: 1">&nbsp;<wbr>&nbsp;<wbr></span><br> </span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes">&nbsp;<wbr></span> ((*((unsigned int<br> *)((char<br> *)(gate_addr)+4)))=(attr)|(addr)&amp;0xffff0000)</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span lang="EN-US" xml:lang="EN-US">&nbsp;<wbr></span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0">&nbsp;<wbr></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span lang="EN-US" xml:lang="EN-US">#define<br> set_intr_gate(n,addr) </span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes">&nbsp;<wbr></span><br> _set_gate(INT_ADDR_I(n),0x8e00,(unsigned int)(addr))</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0">&nbsp;<wbr></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span lang="EN-US" xml:lang="EN-US">#define<br> set_trap_gate(n,addr) </span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes">&nbsp;<wbr></span><br> _set_gate(INT_ADDR_I(n),0x8f00,(unsigned int)(addr))</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0">&nbsp;<wbr></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span lang="EN-US" xml:lang="EN-US">#define<br> set_system_gate(n,addr) </span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes">&nbsp;<wbr></span><br> _set_gate(INT_ADDR_I(n),0xef00,(unsigned int)(addr))</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0">&nbsp;<wbr></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 还是沿用上面的例子，以</span><span lang="EN-US" xml:lang="EN-US">0x00002000</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">为</span><span lang="EN-US" xml:lang="EN-US">IDT</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">开始处，这里可以看到，如果我们想设置一个中断门，那么只需要调用</span><span lang="EN-US" xml:lang="EN-US">set_intr_gate()</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">即可，想设置陷阱们，只需要调用</span><span lang="EN-US" xml:lang="EN-US">set_trap_gate()</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">即可，想设置系统调用只需要调用</span><span lang="EN-US" xml:lang="EN-US">set_system_gate()</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">即可。那么这里可以看到：</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 陷阱门和系统调用属于</span><span lang="EN-US" xml:lang="EN-US">386</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">陷阱门，而中断门属于</span><span lang="EN-US" xml:lang="EN-US">386</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">中断门。</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 中断门和陷阱门特权级为</span><span lang="EN-US" xml:lang="EN-US">0</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">，而系统调用特权级为</span><span lang="EN-US" xml:lang="EN-US">3</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">。</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span lang="EN-US" xml:lang="EN-US">&nbsp;<wbr></span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 具体实例：</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes">&nbsp;<wbr></span><br> set_trap_gate(2,&amp;_nmi);</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes">&nbsp;<wbr></span><br> set_system_gate(3,&amp;_break_point);</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 那么这里就是设置了一个中断号为</span><span lang="EN-US" xml:lang="EN-US">2</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">的陷阱门和一个中断号为</span><span lang="EN-US" xml:lang="EN-US">3</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">的系统调用。其中</span><span lang="EN-US" xml:lang="EN-US">&amp;_nmi</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">和</span><span lang="EN-US" xml:lang="EN-US">&amp;_break_point</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">为中断服务程序地址（</span><span lang="EN-US" xml:lang="EN-US">_nmi</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">和</span><span lang="EN-US" xml:lang="EN-US">_break_point</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">是两个在汇编中定义的函数）。</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 事实上，从上面设置</span><span lang="EN-US" xml:lang="EN-US">IDTR</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">我们可以知道最多可以设置</span><span lang="EN-US" xml:lang="EN-US">256</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">个中断，那么前</span><span lang="EN-US" xml:lang="EN-US">16</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">个中断是</span><span lang="EN-US" xml:lang="EN-US">Intel</span><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'">预留的中断，用来实行特定的功能，如下：</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span lang="EN-US" xml:lang="EN-US"><a href="http://photo.blog.sina.com.cn/showpic.html#blogid=6730a3aa01011ztd&amp;url=http://s1.sinaimg.cn/orignal/6730a3aahbf36a7ebcfb0" target="_blank"><img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" real_src="http://s1.sinaimg.cn/middle/6730a3aahbf36a7ebcfb0&amp;690" alt="操作系统--80X86中断系统" title="操作系统--80X86中断系统"></a></span></p> 
         <p></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0">&nbsp;<wbr></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 而其他的都可以用户自己设置。</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 至此，中断系统大体介绍完，至于中断的具体实现包括带出错码异常和不带出错码异常以及系统调用什么的，将在以后补充。</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; CoLor: red; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 若发现错误将在更正篇<a href="http://blog.sina.com.cn/s/blog_6730a3aa01010xrc.html">http://blog.sina.com.cn/s/blog_6730a3aa01010xrc.html</a>中更正。</span></p> 
         <p style="TexT-inDenT: 21pt; mso-char-indent-count: 2.0"><span style="FonT-FAMiLY: 宋体; mso-ascii-font-family: 'Times new roman'; mso-hansi-font-family: 'Times new roman'"><br> 若有问题欢迎留言。</span></p> 
        </div>
       </div>
       <!-- .entry-content --> 
       <!-- .entry-meta --> 
      </article>
      <!-- #post-238 --> 
      <!-- #comments --> 
     </div>
     <!-- #content --> 
    </div>
    <!-- #primary --> 
    <!-- #secondary .widget-area --> 
   </div>
   <!-- #main --> 
   <!-- #colophon --> 
  </div>
  <!-- #page -->   
  <!-- JiaThis Button BEGIN -->  
  <!-- JiaThis Button END -->   
 </body>
</html>