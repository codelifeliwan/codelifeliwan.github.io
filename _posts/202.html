<!doctype html>
<!--[if IE 6]>
<html id="ie6" lang="zh-CN">
<![endif]-->
<!--[if IE 7]>
<html id="ie7" lang="zh-CN">
<![endif]-->
<!--[if IE 8]>
<html id="ie8" lang="zh-CN">
<![endif]-->
<!--[if !(IE 6) | !(IE 7) | !(IE 8)  ]><!-->
<html lang="zh-CN">
 <!--<![endif]-->
 <head>      
  <link rel="stylesheet" type="text/css" media="all" href="stylesheets/style.css">     
  <link rel="stylesheet" id="codebox-css" href="stylesheets/codebox.css" type="text/css" media="screen">             
 </head> 
 <body class="single single-post postid-202 single-format-standard content-sidebar"> 
  <div id="page" class="hfeed"> 
   <header id="branding" role="banner"> 
    <hgroup> 
     <h1 id="site-title"><span><a href="http://codelifeliwan.github.io/" title="Code_Life_LiWan" rel="home">Code_Life_LiWan</a></span></h1> 
     <h2 id="site-description">My heart will go on and on…</h2> 
    </hgroup>  
    <!-- #access --> 
   </header>
   <!-- #branding --> 
   <div id="main" class="clearfix"> 
    <div id="primary"> 
     <div id="content" role="main"> 
      <!-- #nav-single --> 
      <article id="post-202" class="post-202 post type-post status-publish format-standard hentry category-professional_exchanges tag-reserved"> 
       <header class="entry-header"> 
        <h1 class="entry-title">[转载]汇编中标号与变量名的区别</h1> 
        <div class="entry-meta"> 
         <span class="sep">Posted on </span>
         <a href="http://codelifeliwan.github.io/?p=202" title="下午 3:38" rel="bookmark"><time class="entry-date" datetime="2011-10-27T15:38:08+00:00" pubdate>27 十月, 2011</time></a>
         <span class="by-author"> <span class="sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://codelifeliwan.github.io/?author=1" title="View all posts by wanli" rel="author">wanli</a></span></span> 
         <span class="sep"> — </span> 
         <span class="comments-link"> <a href="http://codelifeliwan.github.io/?p=202#respond" title="Comment on [转载]汇编中标号与变量名的区别">No Comments ↓</a> </span> 
        </div>
        <!-- .entry-meta --> 
       </header>
       <!-- .entry-header --> 
       <div class="entry-content">
        <div class="entry-content"> 
         <div class="blogzz_abstract borderc" style="padding-top:15px;margin:20px 0; border:none; border-top:1px dotted #ccc;"> 
          <div class="blogzz_ainfo" style="margin-bottom:12px;"> 
           <span style="margin-right:25px;"><strong>原文地址：</strong><a target="_blank" href="http://blog.sina.com.cn/s/blog_78021ae10100vnwk.html" title="汇编中标号与变量名的区别">汇编中标号与变量名的区别</a></span> 
           <span><strong>作者：</strong><a href="http://blog.sina.com.cn/u/2013403873" title="bing" target="_blank">bing</a></span> 
          </div> 
          <div class="blogzz_acon"> 
           <p> &nbsp;<wbr><wbr>当程序中要跳转到另一位置时，需要有一个标识来指示新的位置，这就是标号，通过在目标地址的前面放上一个标号，可以在指令中使用标号来代替直接使用地址。</p> 
           <p>使用变量是任何编程语言都要遇到的工作。变量是计算机内存中已命名的存储位置，在大部分的语言中都有很多种类的变量，如整数型、浮点型和字符串等，不同的变量有不同的用途和尺寸，比如说虽然长整数和单精度浮点数都是32位长，但它们的用途不同。</p> 
           <p>顾名思义，变量的值在程序运行中是需要改变的，所以它必须定义在可写的段内，如 .data和<br> .data?，或者在堆栈内。按照定义的位置不同，MASM中的变量也分为全局变量和局部变量两种。</p> 
           <p>详细地~~~~~</p> 
           <p>标号：标号(ＬＡＢＥＬ)是为一组机器指令所起名字.标号可有可无,只有当需要用符号地址来访问该语句时,才给此语句赋予标号.标号是程序目标标志,总是和某地址相联系,供转移或循环指令控制转移使用.</p> 
           <p>　　1　标号属性</p> 
           <p>　　因标号表示是指令地址,所以它有三个属性,即段属性、偏移属性和类型属性.段属性即段地址,标号段必须在ＣＳ中.偏移属性是表示该标号到段首地址距离,单位是字节,是16位无符号整数.类型属性是距离属性,指标号和转移指令距离,该标号在本段内引用,距离在-128～<br> 127之间时称短标号,距离属性为ＳＨＯＲＴ,当标号在本段,距离在-32768～<br> 32767之间时称近标号,距离属性为<font style="FonT-siZe: 22px">ＮＥＡ<font style="BACKGroUnD-CoLor: #ffffff">R</font></font>,当引用标号指令和标号不在同一段时称远标号,距离属性为ＦＡＲ.</p> 
           <p>　　2　标号定义</p> 
           <p>　　标号定义有三种方法:</p> 
           <p>　　（1）　隐含说明标号距离属性为ＳＨＯＲＴ和ＮＥＡＲ标号可以使用隐含说明,即在代码段中定义,标识符后加冒号,放在一条汇编指令操作符前面.例:</p> 
           <p>　　ＮＥＸＴ:　ＭＯＶ　　ＡＸ,ＢＸ</p> 
           <p>　　———-　　　　　</p> 
           <p>　　ＬＯＯＰ　ＮＥＸＴ</p> 
           <p>　　- – – – – – – – -　　　　　　</p> 
           <p>　　ＮＥＸＴ1:　ＣＭＰ　　ＡＸ,ＢＸ</p> 
           <p>　　ＪＡ　　ＮＥＸＴ1　</p> 
           <p>　　其中ＮＥＸＴ和ＮＥＸＴ1都是标号名.</p> 
           <p>　　（2）　用ＬＡＢＥＬ定义标号</p> 
           <p>　　对于属性为ＮＥＡＲ和ＦＡＲ标号均可以用这种定义.格式是:</p> 
           <p>　　标号名　ＬＡＢＥＬ　　　ＮＥＡＲ/ＦＡＲ</p> 
           <p>　　例如:ＮＥＸＴ　ＬＡＢＥＬ ＮＥＡＲ/ＦＡＲ　　　　</p> 
           <p> 　　- – – – – – – – -　　　　　　　　　</p> 
           <p>　　ＬＯＯＰ　　　ＮＥＸＴ</p> 
           <p>　　（3）　用ＥＱＵ定义标号</p> 
           <p>　　对于属性为ＮＥＡＲ和ＦＡＲ标号也可用ＥＱＵ定义.格式是:</p> 
           <p>　　标号名　ＥＱＵ　ＴＨＩＳ　ＮＥＡＴ/ＦＡＲ</p> 
           <p>　　例如:</p> 
           <p>　　ＮＥＸＴ　ＥＱＵ　ＴＨＩＳ　ＮＥＡＲ　</p> 
           <p>　　- – – – – – – – -　　　　　　　　　　　　</p> 
           <p>　　ＬＯＯＰ　　ＮＥＸＴ</p> 
           <p>　　3　标号使用</p> 
           <p>　 （1）　无条件转移指令中标号作为转移地址</p> 
           <p>　　格式:</p> 
           <p>　　ＪＭＰ　　　标号</p> 
           <p>　　其中标号可以是短标号,近标号或远标号</p> 
           <p>　　（2）　循环指令中,标号作为转移地址</p> 
           <p>　　格式:ＬＯＯＰ　　　标号</p> 
           <p>　　其中标号只能是短标号</p> 
           <p>　　（3）　条件转移中标号作为转移地址</p> 
           <p>　　格式:</p> 
           <p>　　条件转移指令　　　标号</p> 
           <p>　　其中标号只能用短标号</p> 
           <p>　　（4）　属性分离符</p> 
           <p>　　　取段地址算符ＳＥＧ</p> 
           <p>　　例如:ＭＯＶ　ＡＸ,ＳＥＧ　ＮＥＸＴ</p> 
           <p>　　ＳＥＧ　ＮＥＸＴ 就是取标号ＮＥＸＴ所在段段地址.</p> 
           <p>　　 取偏移量算符ＯＦＦＳＥＴ</p> 
           <p>　　例如:ＭＯＶ　ＢＸ,　ＯＦＦＳＥＴ　ＮＥＸ</p> 
           <p>　　其中ＯＦＦＳＥＴ　ＮＥＸＴ就是取标号ＮＥＸＴ有效地址,该语句等效于:ＬＥＡ　ＢＸ,　ＮＥＸＴ</p> 
           <p>　　　取类型算符ＴＹＰＥ</p> 
           <p>　　例如:</p> 
           <p>　　ＭＯＶ　ＡＸ,　ＴＹＰＥ　ＮＥＸＴ</p> 
           <p>　　若ＮＥＸＴ为近标号,则ＴＹＰＥ　ＮＥＸＴ值为ＦＦＦＦＨ(-1),若ＮＥＸＴ为远标号ＴＹＰＥ　ＮＥＸＴ值为ＦＦＦＥＨ(-2).其中-1和-2无真正物理意义,仅以数值表示标号类型而已.</p> 
           <p>　</p> 
           <p>　变量：变量(Ｖａｒｉａｂｌｅ)代表存放在某些存储单元数据,这些数据在程序运行期间可以随时被修改.变量是通过变量名在程序中引用,变量名实际上是存储区中一个数据区名字,以变量名数据方式供程序员使用,作为指令或伪.指令操作数,大大方便了程序设计者.</p> 
           <p>　　由于变量是在逻辑段中定义.这就决定了变量和标号一样具有段属性、偏移属性和类型属性,前两个和标号属性相同,而类型属性是指出数据区数据项存取单位是字节(ＢＹＴＥ),字(ＷＯＲＤ)或数字(ＤＷＯＲＤ)等.可见变量和标号主要区别在于变量指是数据,而标号则对应是指令</p> 
           <p>　　（1）　变量定义</p> 
           <p>　　变量通常也有三种定义法</p> 
           <p>　用伪指令ＤＢ,ＤＷ,ＤＤ等来定义</p> 
           <p>　　格式:[变量名]　定义数据伪指令〈表达式〉</p> 
           <p>　　其中变量名可有可无,若没有名字则该变量为无名变量.表达式可以是常数、保留符号”?”、ＡＳＣＩＩ码字符串(只能用ＤＢ定义)、地址表达式(不能用ＤＢ定义)、预置数据表格和用ＤＵＰ定义重复值.变量名可在任一逻辑段中定义,其后边不紧跟冒号而是加一空格</p> 
           <p> 　　.例如:Ａ　ＤＢ　100;Ａ为一个字节,值为100.</p> 
           <p>　　Ｂ　ＤＢ　100,2 3;Ｂ值为100,Ｂ 1值为6.</p> 
           <p>　　Ｃ　ＤＢ　’ＡＢＣ';Ｃ值为41Ｈ,Ｃ 1值为42Ｈ,Ｃ 2值为43Ｈ.Ｄ　ＤＢ　?;</p> 
           <p>　　Ｄ是一个字节,预留一个字节,可以置入任何内容.</p> 
           <p>　　Ｅ　ＤＢ　23　ＤＵＰ(0);定义23个0,每一个0占一个字节.</p> 
           <p>　　Ｆ　ＤＢ　3　ＤＵＰ(1,2　ＤＵＰ(0));定义9个数,顺序为:1,0,0,1,0,0,1,0,0.</p> 
           <p>　　Ｇ　ＤＷ　’ＡＢ’,’ＣＤ';Ｇ值为4142Ｈ,Ｇ 2值为4344Ｈ.</p> 
           <p>　　Ｈ　ＤＷ　2 3;Ｈ为一个字,存放顺序为06,00Ｈ</p> 
           <p>　　Ｉ　ＤＷ　?　预留一个字,占两个字节单元,</p> 
           <p>　　<br> 用伪指令ＬＡＢＥＬ定义变量</p> 
           <p>　　格式:</p> 
           <p>　　变量名　ＬＡＢＥＬ　ＢＹＴＥ/ＷＯＲＤ/ＤＷＯＲＤ</p> 
           <p>　　例如:</p> 
           <p>　　ＢＵＦ　ＬＡＢＥＬ　ＢＹＴＥ</p> 
           <p>　　ＤＢ　21</p> 
           <p>　　它等价于　ＢＵＦ　ＤＢ　21</p> 
           <p>　<br> 用伪指令ＥＱＵ定义变量</p> 
           <p>　　格式:变量名　ＥＱＵ　ＴＨＩＳ　ＢＹＴＥ/ＷＯＲＤ/ＤＷＯＲＤ</p> 
           <p>　　ＴＨＩＳ是定义任意类型算符,它同ＬＡＢＥＬ一样用于建立变量或标号类型属性,而其段属性为语句所在段段地址,偏移属性为所在位置下一个能分配到可用偏移地址.例如:</p> 
           <p>　　ＳＴＡＣＫ　ＳＥＧＭＥＮＴ</p> 
           <p>　　ＤＷ　100　ＤＵＰ(?</p> 
           <p>　　ＴＯＰ　ＥＱＵ　ＴＨＩＳ　ＷＯＲＤ(或ＴＯＰ　ＬＡＢＥＬ　ＷＯＲＤ)</p> 
           <p>　　ＳＴＡＣＫ　ＥＮＤ</p> 
           <p>　　变量ＴＯＰ被定义为字类型,它偏移量应为ＳＴＡＣＫ段定义100个字后下一个字偏移量,它恰就是堆栈指针ＳＰ初值,因此经常用这种方法为ＳＰ赋初值.</p> 
           <p> 　双重定义变量名利用隐含方式和显示方式双重方式,可以对同一位置定义为双重变量.</p> 
           <p>　　格式</p> 
           <p>　　〈变量名〉　ＥＱＵ　ＴＨＩＳ〈类型〉</p> 
           <p>　　〈变量名〉　ＤＢ/ＤＷ/ＤＤ…</p> 
           <p>　　例如:</p> 
           <p>　　ＡＢ　ＥＱＵ　ＴＨＩＳ　ＢＹＴＥ</p> 
           <p>　　(或ＡＢ　ＬＡＢＥＬ　ＢＹＴＥ)</p> 
           <p>　　ＡＷ　ＤＷ　50　ＤＵＰ(0)ＡＷ定义为字变量,在ＡＷ前使用了ＴＨＩＳ　ＢＹＴＥ,定义了一个字节类型变量,访问同一个位置,用ＡＢ按字节访问,用ＡＷ则按字访问.</p> 
           <p>　　（2）　变量访问</p> 
           <p>&nbsp;<wbr><wbr> 变量名作为存储单元直接地址</p> 
           <p>　　变量名用直接寻址时,变量类型必须与指令要求相符合.</p> 
           <p>　　例如:ＡＢ已定义字节变量,ＡＷ定义为字变量,用变量名作直接寻址形式如下:</p> 
           <p>　　ＭＯＶ　ＡＨ,ＡＢ</p> 
           <p>　　ＭＯＶ　ＡＸ,ＡＷ</p> 
           <p>　用合成运算符ＰＴＲ临时改变变量类型</p> 
           <p>　　接上例用</p> 
           <p>　　ＭＯＶ　ＣＸ,ＷＯＲＤ　ＰＴＲ　ＡＢ</p> 
           <p>　　ＭＯＶ　ＣＬ,ＢＹＴＥ　ＰＴＲ　ＡＷ</p> 
           <p>　　则可临时把ＡＢ变为字类型,ＡＷ变为字节类型,但段和偏移属性不变.</p> 
           <p>　变量名作为相对寻址中偏移量</p> 
           <p>　　例如:</p> 
           <p>　　ＭＯＶ　ＡＸ,ＡＢ〔ＳＩ〕</p> 
           <p>　　ＭＯＶ　ＡＸ,ＡＷ[ＢＸ][ＳＩ]</p> 
           <p>　　在这里ＡＢ,ＡＷ分别表示它们偏移量而不是它们所表示数据,常用于数组或表格操作中,ＡＢ[ＳＩ]就表示ＡＢ数组中第ＳＩ个元素.</p> 
           <p>　属性分离符</p> 
           <p>　　其中ＳＥＧ和ＯＦＦＳＥＴ用法和标号相同,分别表示取变量所在段段地址和变量偏移地址.而ＴＹＰＥ运算符,将回送该变量类型所表示字节数.</p> 
           <p>　　例如:设ＡＢ为字节变量,ＡＷ为字变量,则:</p> 
           <p>　　ＭＯＶ　ＡＨ,ＴＹＰＥ　ＡＢ即ＭＯＶ　ＡＨ,1</p> 
           <p>　　ＭＯＶ　ＡＸ,ＴＹＰＥ　ＡＷ即ＭＯＶ　ＡＸ,2</p> 
           <p>　<br> &nbsp;<wbr><wbr><br> 取变量数据项个数运算符ＬＥＮＧＴＨ对于变量定义时使用ＤＵＰ情况,汇编程序将回送ＤＵＰ前重复次数,即分配给该变量单元数,若表达式有多个ＤＵＰ,则取第一个ＤＵＰ项,其它情况则回送1.</p> 
           <p>　　例如:ＡＲＲＡＹ　ＤＷ　50　ＤＵＰ(0)则</p> 
           <p>　　ＭＯＶ　ＣＸ,ＬＥＮＧＴＨ　ＡＲＲＡＹ即ＭＯＶ　ＣＸ,50</p> 
           <p>　　ＡＲＲＡＹ1,ＤＷ1,2,3　则</p> 
           <p>　　ＭＯＶ　ＣＸ,ＬＥＮＧＴＨ　ＡＲＲＡＹ1</p> 
           <p>　　即ＭＯＶ　ＣＸ,1</p> 
           <p>　　可见ＬＥＮＧＴＨ表示数组元素个数,而不管其类型.</p> 
           <p> 　取变量数据项长度算符ＳＩＺＥ</p> 
           <p>　　ＳＩＺＥ算符,汇编程序将回送分配给该变量字节数,即</p> 
           <p>　　ＳＩＺＥ=ＬＥＮＧＴＨ ＴＹＰＥ</p> 
           <p>　　例如:</p> 
           <p>　　ＡＲＲＡＹ　ＤＷ　50　ＤＵＰ(0)　则</p> 
           <p>　　ＳＩＺＥ　ＡＲＲＡＹ=50 2=100</p> 
           <p>　　要注意:对字符串变量求其长度,使用ＳＩＺＥ不能达到目.</p> 
           <p>　　例如:</p> 
           <p>　　ＳＴ　ＤＢ　’ＡＢＣＤＥＦＧ’　则</p> 
           <p>　　ＳＩＺＥ　ＳＴ值为1而不是7,欲求字符串长可用ＣＯＵＮＴ　ＥＱＵ　＄-ＳＴ,则ＣＯＵＮＴ值为7,其中＄为定义ＳＴ一串字符后下一个可用偏移地址.</p> 
           <p>　　3 2 7　变量名仅对应数据区第一个数据项</p> 
           <p>　　例如:</p> 
           <p>　　ＷＯＲＤ　ＤＷ　20　ＤＵＰ(?)</p> 
           <p>　　ＭＯＶ　ＡＸ,ＷＯＲＤ;第一个元素送ＡＸ,</p> 
           <p>　　ＭＯＶ　ＡＸ,ＷＯＲＤ 38;第20个元素送ＡＸ.<br></p> 
           <p>&nbsp;<wbr></p> 
           <div> 
            <pre>
标号是指令的符号地址，标号出现在代码段中
变量是操作数的符号地址，变量一般出现在数据段中
<br>
</pre> 
           </div> 
          </div> 
         </div> 
        </div>
       </div>
       <!-- .entry-content --> 
       <!-- .entry-meta --> 
      </article>
      <!-- #post-202 --> 
      <!-- #comments --> 
     </div>
     <!-- #content --> 
    </div>
    <!-- #primary --> 
    <!-- #secondary .widget-area --> 
   </div>
   <!-- #main --> 
   <!-- #colophon --> 
  </div>
  <!-- #page -->   
  <!-- JiaThis Button BEGIN -->  
  <!-- JiaThis Button END -->   
 </body>
</html>