<!doctype html>
<!--[if IE 6]>
<html id="ie6" lang="zh-CN">
<![endif]-->
<!--[if IE 7]>
<html id="ie7" lang="zh-CN">
<![endif]-->
<!--[if IE 8]>
<html id="ie8" lang="zh-CN">
<![endif]-->
<!--[if !(IE 6) | !(IE 7) | !(IE 8)  ]><!-->
<html lang="zh-CN">
 <!--<![endif]-->
 <head>      
  <link rel="stylesheet" type="text/css" media="all" href="stylesheets/style.css">     
  <link rel="stylesheet" id="codebox-css" href="stylesheets/codebox.css" type="text/css" media="screen">             
 </head> 
 <body class="single single-post postid-93 single-format-standard content-sidebar"> 
  <div id="page" class="hfeed"> 
   <header id="branding" role="banner"> 
    <hgroup> 
     <h1 id="site-title"><span><a href="http://codelifeliwan.github.io/" title="Code_Life_LiWan" rel="home">Code_Life_LiWan</a></span></h1> 
     <h2 id="site-description">My heart will go on and on…</h2> 
    </hgroup>  
    <!-- #access --> 
   </header>
   <!-- #branding --> 
   <div id="main" class="clearfix"> 
    <div id="primary"> 
     <div id="content" role="main"> 
      <!-- #nav-single --> 
      <article id="post-93" class="post-93 post type-post status-publish format-standard hentry category-acm tag-uva"> 
       <header class="entry-header"> 
        <h1 class="entry-title">UVA&nbsp;705&nbsp;–&nbsp;Slash&nbsp;Maze&nbsp;解题报告</h1> 
        <div class="entry-meta"> 
         <span class="sep">Posted on </span>
         <a href="http://codelifeliwan.github.io/?p=93" title="下午 6:11" rel="bookmark"><time class="entry-date" datetime="2011-07-26T18:11:47+00:00" pubdate>26 七月, 2011</time></a>
         <span class="by-author"> <span class="sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://codelifeliwan.github.io/?author=1" title="View all posts by wanli" rel="author">wanli</a></span></span> 
         <span class="sep"> — </span> 
         <span class="comments-link"> <a href="http://codelifeliwan.github.io/?p=93#respond" title="Comment on UVA&nbsp;705&nbsp;–&nbsp;Slash&nbsp;Maze&nbsp;解题报告">No Comments ↓</a> </span> 
        </div>
        <!-- .entry-meta --> 
       </header>
       <!-- .entry-header --> 
       <div class="entry-content">
        <div class="entry-content"> 
         <p> 这个题意思就是求出图里面围成的圆，有圆的话输出圆的最大边长</p> 
         <div>
           套用网上一兄弟的说法，这个题初看没思路，仔细一看，嘿！还真没思路。。。。。 
         </div> 
         <div>
           惊心动魄的解法，兄弟们都太有才了，就是把一个小格细分，分成4个或者9个小格（我分成了4个），剩下的就是注意点的深搜了。细节要注意！注意要输出空行！话说黑猫白猫，逮着老鼠就是好猫，用了两遍深搜，但是1A了。。。。。 
         </div> 
         <div>
           题目： 
         </div> 
         <div> 
          <table bgcolor="#0060F0"> 
           <tbody> 
            <tr> 
             <td><b><font color="#C0FFFF" size="5"><a name="SECTION0001000000000000000000">Slash<br> Maze</a>&nbsp;<wbr></font></b></td> 
            </tr> 
           </tbody> 
          </table> 
          <p>By filling a rectangle with slashes (/) and backslashes (<br> <img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" real_src="http://uva.onlinejudge.org/external/7/705img1.gif" alt="$backslash$" height="34" width="13" align="middle" border="0" title="UVA&nbsp;<wbr>705&nbsp;<wbr>-&nbsp;<wbr>Slash&nbsp;<wbr>Maze&nbsp;<wbr>解题报告"><wbr>705&nbsp;<wbr>-&nbsp;<wbr>Slash&nbsp;<wbr>Maze&nbsp;<wbr>解题报告” /&gt;), you can generate nice little mazes. Here is an<br> example:</p> 
          <div align="center"> 
           <img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" real_src="http://uva.onlinejudge.org/external/7/p705.gif" alt="UVA&nbsp;<wbr>705&nbsp;<wbr>-&nbsp;<wbr>Slash&nbsp;<wbr>Maze&nbsp;<wbr>解题报告"> 
           <wbr>705&nbsp; 
           <wbr>-&nbsp; 
           <wbr>Slash&nbsp; 
           <wbr>Maze&nbsp; 
           <wbr>解题报告” TITLE=”UVA&nbsp; 
           <wbr>705&nbsp; 
           <wbr>-&nbsp; 
           <wbr>Slash&nbsp; 
           <wbr>Maze&nbsp; 
           <wbr>解题报告” /&gt; 
          </div> 
          <p>As you can see, paths in the maze cannot branch, so the whole<br> maze only contains cyclic paths and paths entering somewhere and<br> leaving somewhere else. We are only interested in the cycles. In<br> our example, there are two of them.</p> 
          <p>Your task is to write a program that counts the cycles and finds<br> the length of the longest one. The length is defined as the number<br> of small squares the cycle consists of (the ones bordered by gray<br> lines in the picture). In this example, the long cycle has length<br> 16 and the short one length 4.</p> 
          <h2><font color="#0070E8"><a name="SECTION0001001000000000000000">Input</a>&nbsp;<wbr></font></h2> 
          <p>The input contains several maze descriptions. Each description<br> begins with one line containing two integers <i>w</i> and <i>h</i><br> ( <img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" real_src="http://uva.onlinejudge.org/external/7/705img2.gif" alt="$1 le w, h le 75$" height="32" width="108" align="middle" border="0" title="UVA&nbsp;<wbr>705&nbsp;<wbr>-&nbsp;<wbr>Slash&nbsp;<wbr>Maze&nbsp;<wbr>解题报告"><wbr>705&nbsp;<wbr>-&nbsp;<wbr>Slash&nbsp;<wbr>Maze&nbsp;<wbr>解题报告” /&gt;), the width and the height of the maze. The next<br> <i>h</i> lines represent the maze itself, and contain <i>w</i><br> characters each; all these characters will be either<br> “<code>/</code>” or “<code></code>“.</p> 
          <p>The input is terminated by a test case beginning with <i>w</i> =<br> <i>h</i> = 0. This case should not be processed.</p> 
          <h2><font color="#0070E8"><a name="SECTION0001002000000000000000">Output</a>&nbsp;<wbr></font></h2> 
          <p>For each maze, first output the line “<tt>Maze<br> #</tt><i>n</i><tt>:</tt>”, where <i>n</i> is the number of the<br> maze. Then, output the line “<i>k</i><tt>Cycles; the longest has<br> length</tt> <i>l</i><tt>.</tt>”, where <i>k</i> is the number of<br> cycles in the maze and <i>l</i> the length of the longest of the<br> cycles. If the maze does not contain any cycles, output the line<br> “<tt>There are no cycles.</tt>“.</p> 
          <p>Output a blank line after each test case.</p> 
          <h2><font color="#0070E8"><a name="SECTION0001003000000000000000">Sample<br> Input</a>&nbsp;<wbr></font></h2> 
          <pre>
6 4
</pre> 
          <pre>
//\/
</pre> 
          <pre>
////
</pre> 
          <pre>
//\/
</pre> 
          <pre>
////
</pre> 
          <pre>
3 3
</pre> 
          <pre>
///
</pre> 
          <pre>
//
</pre> 
          <pre>
\
</pre> 
          <pre>
0 0
</pre> 
          <h2><font color="#0070E8"><a name="SECTION0001004000000000000000">Sample<br> Output</a>&nbsp;<wbr></font></h2> 
          <pre>
Maze #1:&nbsp;<wbr>
</pre> 
          <pre>
2 Cycles; the longest has length 16.&nbsp;<wbr>
</pre> 
          <pre>
<br>
</pre> 
          <pre>
&nbsp;<wbr>Maze #2:&nbsp;<wbr>
</pre> 
          <pre>
There are no cycles.&nbsp;<wbr>
</pre> 
          <pre>
<br>
</pre> 
          <pre>
<br>
</pre> 
          <pre>
代码：
</pre> 
          <pre>
<br>
</pre> 
          <pre>
#include&lt;iostream&gt;
</pre> 
          <pre>
#include&lt;cstring&gt;
</pre> 
          <pre>
#include&lt;fstream&gt;
</pre> 
          <pre>
using namespace std;
</pre> 
          <pre>
int w,h,w2,h2;
</pre> 
          <pre>
char map[80][80];
</pre> 
          <pre>
int nummap[160][160];
</pre> 
          <pre>
int vis[160][160];
</pre> 
          <pre>
bool found;
</pre> 
          <pre>
int n_num;
</pre> 
          <pre>
<br>
</pre> 
          <pre>
void chuli(){
</pre> 
          <pre>
<span style="white-space:pre"> </span>for(int i=0;i&lt;h;i++){
</pre> 
          <pre>
<span style="white-space:pre"> </span>for(int j=0;j&lt;w;j++){
</pre> 
          <pre>
<span style="white-space:pre"> </span>if(map[i][j]=='\'){
</pre> 
          <pre>
<span style="white-space:pre"> </span>nummap[2*i][2*j]=1;
</pre> 
          <pre>
<span style="white-space:pre"> </span>nummap[2*i][2*j+1]=0;
</pre> 
          <pre>
<span style="white-space:pre"> </span>nummap[2*i+1][2*j]=0;
</pre> 
          <pre>
<span style="white-space:pre"> </span>nummap[2*i+1][2*j+1]=1;
</pre> 
          <pre>
<span style="white-space:pre"> </span>}else{
</pre> 
          <pre>
<span style="white-space:pre"> </span>nummap[2*i][2*j]=0;
</pre> 
          <pre>
<span style="white-space:pre"> </span>nummap[2*i][2*j+1]=-1;
</pre> 
          <pre>
<span style="white-space:pre"> </span>nummap[2*i+1][2*j]=-1;
</pre> 
          <pre>
<span style="white-space:pre"> </span>nummap[2*i+1][2*j+1]=0;
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
}
</pre> 
          <pre>
<br>
</pre> 
          <pre>
void dfs(int x,int y){
</pre> 
          <pre>
<span style="white-space:pre"> </span>vis[x][y]=1;
</pre> 
          <pre>
<span style="white-space:pre"> </span>if(x==0||y==0||x==h2-1||y==w2-1)found=false;
</pre> 
          <pre>
<span style="white-space:pre"> </span>int mark[8][2]={{-1,0},{1,0},{0,1},{0,-1},{1,1},{1,-1},{-1,-1},{-1,1}};
</pre> 
          <pre>
<span style="white-space:pre"> </span>for(int i=0;i&lt;8;i++){
</pre> 
          <pre>
<span style="white-space:pre"> </span>int nx=x+mark[i][0];
</pre> 
          <pre>
<span style="white-space:pre"> </span>int ny=y+mark[i][1];
</pre> 
          <pre>
<span style="white-space:pre"> </span>if(nx&gt;=0&amp;&amp;ny&gt;=0&amp;&amp;nx&lt;h2&amp;&amp;ny&lt;w2&amp;&amp;vis[nx][ny]==0&amp;&amp;nummap[nx][ny]==0){
</pre> 
          <pre>
<span style="white-space:pre"> </span>if(mark[i][0]*mark[i][1]==0){
</pre> 
          <pre>
<span style="white-space:pre"> </span>dfs(nx,ny);
</pre> 
          <pre>
<span style="white-space:pre"> </span>}else if((mark[i][0]==1&amp;&amp;mark[i][1]==1)||(mark[i][0]==-1&amp;&amp;mark[i][1]==-1)){
</pre> 
          <pre>
<span style="white-space:pre"> </span>if(!(nummap[nx][y]==-1||nummap[x][ny]==-1)){
</pre> 
          <pre>
<span style="white-space:pre"> </span>dfs(nx,ny);
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
<span style="white-space:pre"> </span>}else if((mark[i][0]==1&amp;&amp;mark[i][1]==-1)||(mark[i][0]==-1&amp;&amp;mark[i][1]==1)){
</pre> 
          <pre>
<span style="white-space:pre"> </span>if(!(nummap[nx][y]==1||nummap[x][ny]==1)){
</pre> 
          <pre>
<span style="white-space:pre"> </span>dfs(nx,ny);
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
}
</pre> 
          <pre>
<br>
</pre> 
          <pre>
void dfs1(int x,int y){
</pre> 
          <pre>
<span style="white-space:pre"> </span>n_num++;
</pre> 
          <pre>
<span style="white-space:pre"> </span>vis[x][y]=2;
</pre> 
          <pre>
<span style="white-space:pre"> </span>int mark[8][2]={{-1,0},{1,0},{0,1},{0,-1},{1,1},{1,-1},{-1,-1},{-1,1}};
</pre> 
          <pre>
<span style="white-space:pre"> </span>for(int i=0;i&lt;8;i++){
</pre> 
          <pre>
<span style="white-space:pre"> </span>int nx=x+mark[i][0];
</pre> 
          <pre>
<span style="white-space:pre"> </span>int ny=y+mark[i][1];
</pre> 
          <pre>
<span style="white-space:pre"> </span>if(vis[nx][ny]==1&amp;&amp;(nummap[nx+1][ny]!=0||nummap[nx-1][ny]!=0||nummap[nx][ny+1]!=0||nummap[nx][ny-1]!=0)){
</pre> 
          <pre>
<span style="white-space:pre"> </span>if(mark[i][0]*mark[i][1]==0){
</pre> 
          <pre>
<span style="white-space:pre"> </span>dfs1(nx,ny);
</pre> 
          <pre>
<span style="white-space:pre"> </span>}else if((mark[i][0]==1&amp;&amp;mark[i][1]==1)||(mark[i][0]==-1&amp;&amp;mark[i][1]==-1)){
</pre> 
          <pre>
<span style="white-space:pre"> </span>if(!(nummap[nx][y]==-1||nummap[x][ny]==-1)){
</pre> 
          <pre>
<span style="white-space:pre"> </span>dfs1(nx,ny);
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
<span style="white-space:pre"> </span>}else if((mark[i][0]==1&amp;&amp;mark[i][1]==-1)||(mark[i][0]==-1&amp;&amp;mark[i][1]==1)){
</pre> 
          <pre>
<span style="white-space:pre"> </span>if(!(nummap[nx][y]==1||nummap[x][ny]==1)){
</pre> 
          <pre>
<span style="white-space:pre"> </span>dfs1(nx,ny);
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
}
</pre> 
          <pre>
<br>
</pre> 
          <pre>
int main()
</pre> 
          <pre>
{
</pre> 
          <pre>
//<span style="white-space:pre"> </span>freopen("test.txt","r",stdin);
</pre> 
          <pre>
<span style="white-space:pre"> </span>int count=0;
</pre> 
          <pre>
<span style="white-space:pre"> </span>while(cin&gt;&gt;w&gt;&gt;h){
</pre> 
          <pre>
<span style="white-space:pre"> </span>if(0==w&amp;&amp;0==h)break;
</pre> 
          <pre>
<span style="white-space:pre"> </span>count++;
</pre> 
          <pre>
<span style="white-space:pre"> </span>cout&lt;&lt;"Maze #"&lt;&lt;count&lt;&lt;":"&lt;&lt;endl;
</pre> 
          <pre>
<span style="white-space:pre"> </span>getchar();
</pre> 
          <pre>
<span style="white-space:pre"> </span>w2=2*w;
</pre> 
          <pre>
<span style="white-space:pre"> </span>h2=2*h;
</pre> 
          <pre>
<span style="white-space:pre"> </span>for(int i=0;i&lt;h;i++){
</pre> 
          <pre>
<span style="white-space:pre"> </span>cin&gt;&gt;map[i];
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
<span style="white-space:pre"> </span>chuli();
</pre> 
          <pre>
<span style="white-space:pre"> </span>memset(vis,0,sizeof(vis));
</pre> 
          <pre>
<span style="white-space:pre"> </span>int maxnum=0;
</pre> 
          <pre>
<span style="white-space:pre"> </span>int max=0;
</pre> 
          <pre>
<span style="white-space:pre"> </span>for(int i=0;i&lt;h2;i++){
</pre> 
          <pre>
<span style="white-space:pre"> </span>for(int j=0;j&lt;w2;j++){
</pre> 
          <pre>
<span style="white-space:pre"> </span>if(vis[i][j]==0&amp;&amp;nummap[i][j]==0){
</pre> 
          <pre>
<span style="white-space:pre"> </span>found=true;
</pre> 
          <pre>
<span style="white-space:pre"> </span>n_num=0;
</pre> 
          <pre>
<span style="white-space:pre"> </span>dfs(i,j);
</pre> 
          <pre>
<span style="white-space:pre"> </span>if(found){
</pre> 
          <pre>
<span style="white-space:pre"> </span>maxnum++;
</pre> 
          <pre>
<span style="white-space:pre"> </span>dfs1(i,j);
</pre> 
          <pre>
<span style="white-space:pre"> </span>if(max&lt;n_num){
</pre> 
          <pre>
<span style="white-space:pre"> </span>max=n_num;
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
<span style="white-space:pre"> </span>if(maxnum==0)cout&lt;&lt;"There are no cycles."&lt;&lt;endl&lt;&lt;endl;
</pre> 
          <pre>
<span style="white-space:pre"> </span>else cout&lt;&lt;maxnum&lt;&lt;" Cycles; the longest has length "&lt;&lt;max&lt;&lt;"."&lt;&lt;endl&lt;&lt;endl;
</pre> 
          <pre>
<span style="white-space:pre"> </span>}
</pre> 
          <pre>
<span style="white-space:pre"> </span>return 0;
</pre> 
          <pre>
}
</pre> 
          <div></div> 
         </div> 
        </div>
       </div>
       <!-- .entry-content --> 
       <!-- .entry-meta --> 
      </article>
      <!-- #post-93 --> 
      <!-- #comments --> 
     </div>
     <!-- #content --> 
    </div>
    <!-- #primary --> 
    <!-- #secondary .widget-area --> 
   </div>
   <!-- #main --> 
   <!-- #colophon --> 
  </div>
  <!-- #page -->   
  <!-- JiaThis Button BEGIN -->  
  <!-- JiaThis Button END -->   
 </body>
</html>